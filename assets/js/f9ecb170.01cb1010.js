"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9978],{3905:(e,a,n)=>{n.d(a,{Zo:()=>i,kt:()=>m});var t=n(7294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function d(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=t.createContext({}),s=function(e){var a=t.useContext(c),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},i=function(e){var a=s(e.components);return t.createElement(c.Provider,{value:a},e.children)},p="mdxType",b={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},k=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,i=d(e,["components","mdxType","originalType","parentName"]),p=s(n),k=r,m=p["".concat(c,".").concat(k)]||p[k]||b[k]||l;return n?t.createElement(m,o(o({ref:a},i),{},{components:n})):t.createElement(m,o({ref:a},i))}));function m(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=k;var d={};for(var c in a)hasOwnProperty.call(a,c)&&(d[c]=a[c]);d.originalType=e,d[p]="string"==typeof e?e:r,o[1]=d;for(var s=2;s<l;s++)o[s]=n[s];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}k.displayName="MDXCreateElement"},5121:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>o,default:()=>b,frontMatter:()=>l,metadata:()=>d,toc:()=>s});var t=n(7462),r=(n(7294),n(3905));const l={},o=void 0,d={unversionedId:"Chaos/ChaosBlade",id:"Chaos/ChaosBlade",title:"ChaosBlade",description:"[TOC]",source:"@site/docs/Chaos/ChaosBlade.md",sourceDirName:"Chaos",slug:"/Chaos/ChaosBlade",permalink:"/docs/Chaos/ChaosBlade",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Windows",permalink:"/docs/CSBasic/Windows"},next:{title:"ChaosMesh",permalink:"/docs/Chaos/ChaosMesh"}},c={},s=[{value:"1. ChaosBlade \u5165\u95e8",id:"1-chaosblade-\u5165\u95e8",level:2},{value:"1.1 ChaosBlade \u7b80\u4ecb",id:"11-chaosblade-\u7b80\u4ecb",level:3},{value:"1.2 ChaosBlade \u67b6\u6784",id:"12-chaosblade-\u67b6\u6784",level:3},{value:"2. ChaosBlade \u642d\u5efa",id:"2-chaosblade-\u642d\u5efa",level:2},{value:"2.1 ChaosBlade \u642d\u5efa",id:"21-chaosblade-\u642d\u5efa",level:3},{value:"2.2 ChaosBlade Operator \u642d\u5efa",id:"22-chaosblade-operator-\u642d\u5efa",level:3},{value:"2.3 ChaosBlade Box \u642d\u5efa",id:"23-chaosblade-box-\u642d\u5efa",level:3},{value:"3. ChaosBlade \u5b9e\u9a8c",id:"3-chaosblade-\u5b9e\u9a8c",level:2},{value:"3.1 ChaosBlade \u573a\u666f",id:"31-chaosblade-\u573a\u666f",level:3},{value:"3.2 ChaosBlade \u57fa\u7840",id:"32-chaosblade-\u57fa\u7840",level:3},{value:"blade demo",id:"blade-demo",level:4},{value:"blade base",id:"blade-base",level:4},{value:"blade server",id:"blade-server",level:4},{value:"3.2 ChaosBlade \u5b9e\u9a8c",id:"32-chaosblade-\u5b9e\u9a8c",level:3},{value:"blade create cpu load",id:"blade-create-cpu-load",level:4},{value:"blade create disk burn",id:"blade-create-disk-burn",level:4},{value:"blade create disk fill",id:"blade-create-disk-fill",level:4},{value:"blade create mem load",id:"blade-create-mem-load",level:4},{value:"blade create network delay",id:"blade-create-network-delay",level:4},{value:"blade create network dns",id:"blade-create-network-dns",level:4},{value:"blade create network loss",id:"blade-create-network-loss",level:4},{value:"blade create docker",id:"blade-create-docker",level:4},{value:"blade create docker cpu",id:"blade-create-docker-cpu",level:5},{value:"blade create docker network",id:"blade-create-docker-network",level:5},{value:"blade create k8s",id:"blade-create-k8s",level:4},{value:"blade create k8s node-cpu",id:"blade-create-k8s-node-cpu",level:5},{value:"blade create k8s node-disk",id:"blade-create-k8s-node-disk",level:5},{value:"blade create k8s node-mem",id:"blade-create-k8s-node-mem",level:5},{value:"blade create k8s node-network",id:"blade-create-k8s-node-network",level:5},{value:"4. ChaosBlade \u539f\u7406",id:"4-chaosblade-\u539f\u7406",level:2},{value:"4.1 \u78c1\u76d8 IO",id:"41-\u78c1\u76d8-io",level:3},{value:"5. \u77e5\u8bc6\u788e\u7247",id:"5-\u77e5\u8bc6\u788e\u7247",level:2}],i={toc:s},p="wrapper";function b(e){let{components:a,...l}=e;return(0,r.kt)(p,(0,t.Z)({},i,l,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"[TOC]"),(0,r.kt)("h1",{align:"center"},"ChaosBlade"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"By\uff1aweimenghua",(0,r.kt)("br",{parentName:"p"}),"\n","Date\uff1a2022.11.20",(0,r.kt)("br",{parentName:"p"}),"\n","Description\uff1aChaosblade \u6df7\u6c8c\u5de5\u7a0b\u5b9e\u9a8c\u5de5\u5177")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u8003\u8d44\u6599"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://chaosblade.io/"},"ChaosBlade \u5b98\u7f51"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://chaosblade-io.gitbook.io/chaosblade-help-zh-cn/"},"ChaosBlade \u6587\u6863"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/chaosblade-io"},"ChaosBlade \u6e90\u7801"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/chaosblade-io/awesome-chaosblade"},"awesome-chaosblade"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/dastergon/awesome-chaos-engineering"},"awesome-chaos-engineering"),"  "),(0,r.kt)("h2",{id:"1-chaosblade-\u5165\u95e8"},"1. ChaosBlade \u5165\u95e8"),(0,r.kt)("h3",{id:"11-chaosblade-\u7b80\u4ecb"},"1.1 ChaosBlade \u7b80\u4ecb"),(0,r.kt)("p",null,"ChaosBlade \u662f\u963f\u91cc\u5df4\u5df4 2019 \u5e74\u5f00\u6e90\u7684\u6df7\u6c8c\u5de5\u7a0b\u9879\u76ee\uff0c\u5305\u542b\u6df7\u6c8c\u5de5\u7a0b\u5b9e\u9a8c\u5de5\u5177 chaosblade \u548c\u6df7\u6c8c\u5de5\u7a0b\u5e73\u53f0 chaosblade-box\uff0c\u65e8\u5728\u901a\u8fc7\u6df7\u6c8c\u5de5\u7a0b\u5e2e\u52a9\u4f01\u4e1a\u89e3\u51b3\u4e91\u539f\u751f\u8fc7\u7a0b\u4e2d\u9ad8\u53ef\u7528\u95ee\u9898\u3002"),(0,r.kt)("h3",{id:"12-chaosblade-\u67b6\u6784"},"1.2 ChaosBlade \u67b6\u6784"),(0,r.kt)("p",null,"ChaosBlade \u652f\u6301\u591a\u79cd\u73af\u5883\u90e8\u7f72\u4e0e\u6f14\u7ec3\uff0c\u5305\u62ec linux\u3001docker\u3001kubernetes \u96c6\u7fa4\u53ca\u5404\u7c7b\u4e91\u5382\u5546\u73af\u5883\u3002ChaosBlade \u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u7ec4\u4ef6\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ChaosBlade-Box Console\uff1aChaosBlade \u53ef\u89c6\u5316\u7ec4\u4ef6\uff0c\u4e3b\u8981\u63d0\u4f9b\u4e00\u5957\u7528\u6237\u53cb\u597d\u7684 Web \u754c\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8be5\u754c\u9762\u8fdb\u884c\u6df7\u6c8c\u5de5\u7a0b\u5b9e\u9a8c\u7684\u7f16\u6392\u4e0e\u64cd\u4f5c\u7ba1\u7406\u3002"),(0,r.kt)("li",{parentName:"ul"},"ChaosBlade-Box Server\uff1a\u6838\u5fc3\u903b\u8f91\u7ec4\u4ef6\uff0c\u4e3b\u8981\u8d1f\u8d23\u6df7\u6c8c\u5de5\u7a0b\u5b9e\u9a8c\u7684\u7ba1\u7406\u4e0e\u7f16\u6392\uff0c\u63a2\u9488\u4e0e\u5e94\u7528\u7ba1\u7406\u3002\u5305\u62ec\u7ec4\u4ef6\uff0cChaos Engine\uff1a\u6f14\u7ec3\u5f15\u64ce\uff0c\u5305\u62ec\u6d41\u7a0b\u7f16\u6392\u3001\u5b89\u5168\u7ba1\u63a7\u3001\u6f14\u7ec3\u62a5\u544a\u7b49\u529f\u80fd\uff1bChaos Runner\uff1a\u6f14\u7ec3\u6267\u884c\u5668\uff0c\u517c\u5bb9\u591a\u79cd\u6267\u884c\u5de5\u5177\uff1bChaos Experinece\uff1a\u6f14\u7ec3\u7ecf\u9a8c\u5e93\u7b49\u3002"),(0,r.kt)("li",{parentName:"ul"},"Agent\uff1a\u6838\u5fc3\u903b\u8f91\u7ec4\u4ef6\uff0c\u90e8\u7f72\u5728\u7528\u6237\u7ec8\u7aef\u7684\u4e3b\u673a\u6216 Kubernetes \u96c6\u7fa4\u5185\uff0c\u4e3b\u8981\u8d1f\u8d23\u548c ChaosBlade-Box Server \u5efa\u8054\u4e0a\u62a5\u5fc3\u8df3\u5e76\u4f5c\u4e3a\u547d\u4ee4\u4e0b\u53d1\u901a\u9053\u3002"),(0,r.kt)("li",{parentName:"ul"},"ChaosBlade\uff1a\u4e3b\u8981\u6267\u884c\u5de5\u5177\uff0c\u80fd\u5728\u4e3b\u673a\u548c Kubernetes \u7b49\u4e0d\u540c\u73af\u5883\u4e0a\u6267\u884c\u6545\u969c\u6ce8\u5165\uff0c\u80fd\u5bf9\u7cfb\u7edf\u7f51\u7edc\u8bbe\u5907\u3001\u6587\u4ef6\u7cfb\u7edf\u3001\u5185\u6838\u53ca\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u5e94\u7528\u7b49\u8fdb\u884c\u6545\u969c\u5e72\u6270\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"chaosblade \u67b6\u6784",src:n(2656).Z,width:"2434",height:"1964"})),(0,r.kt)("h2",{id:"2-chaosblade-\u642d\u5efa"},"2. ChaosBlade \u642d\u5efa"),(0,r.kt)("h3",{id:"21-chaosblade-\u642d\u5efa"},"2.1 ChaosBlade \u642d\u5efa"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/chaosblade-io/chaosblade/releases"},"ChaosBlade \u4e0b\u8f7d\u5730\u5740")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"1\u3001\u4e0b\u8f7d\n\u65b9\u5f0f\u4e00\nwget https://github.com/chaosblade-io/chaosblade/releases/download/v1.7.1/chaosblade-1.7.1-linux-amd64.tar.gz\n\u65b9\u5f0f\u4e8c\nwget https://chaosblade.oss-cn-hangzhou.aliyuncs.com/agent/github/1.7.1/chaosblade-1.7.1-linux-amd64.tar.gz\n\n2\u3001\u89e3\u538b\ntar -zxvf chaosblade-1.7.1-linux-amd64.tar.gz && cd chaosblade-1.7.1/\n\n3\u3001\u8bbe\u7f6e\nln -s `pwd`/blade /usr/local/bin/blade\n\n4\u3001\u9a8c\u8bc1\nblade v\n\n5\u3001\u5e2e\u52a9\nblade help\nblade create help\nblade create cpu help\n\n6\u3001\u5378\u8f7d\nrm -rf chaosblade-*\n\n7\u3001\u8bbe\u7f6e blade \u522b\u540d b\ncat >> ~/.bashrc << EOF\nalias b='blade'\nEOF\nsource ~/.bashrc\ncat ~/.bashrc\n")),(0,r.kt)("h3",{id:"22-chaosblade-operator-\u642d\u5efa"},"2.2 ChaosBlade Operator \u642d\u5efa"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/chaosblade-io/chaosblade-operator/releases"},"ChaosBlade Operator \u4e0b\u8f7d\u5730\u5740")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"1\u3001\u4e0b\u8f7d\nwget https://github.com/chaosblade-io/chaosblade-operator/releases/download/v1.7.1/chaosblade-operator-1.7.1.tgz\n\n2\u3001\u5b89\u88c5\nhelm install chaosblade-operator chaosblade-operator-1.7.1.tgz --namespace chaosblade --create-namespace\n\n\u6ce8\uff1a\u672a\u5b9e\u8df5\nhelm install chaosblade-operator chaosblade-operator-1.7.1.tgz --namespace chaosblade --set blade.repository=chaosbladeio/chaosblade-tool,operator.repository=chaosbladeio/chaosblade-operator \n\n3\u3001\u9a8c\u8bc1\uff08\u6709\u51e0\u4e2a node \u5c31\u6709\u51e0\u4e2a tool\uff09\nkubectl get pod -n chaosblade\n\n4\u3001\u5378\u8f7d\nhelm uninstall chaosblade-operator -n chaosblade\n\n\u5220\u9664 crd \u8d44\u6e90\nkubectl delete crd chaosblades.chaosblade.io\n\n\u5982\u679c crd \u8d44\u6e90\u5220\u9664\u957f\u65f6\u95f4\u6ca1\u6709\u6210\u529f\uff0c\u53ef\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u5220\u9664\uff1a\nblades=$(kubectl get blade | grep -v NAME | awk '{print $1}' | tr '\\n' ' ') && kubectl patch blade $blades --type merge -p '{\"metadata\":{\"finalizers\":[]}}'\n\n\u505c\u6b62\u5168\u90e8\u5b9e\u9a8c\uff0c\u5220\u9664\u6240\u6709\u521b\u5efa\u7684\u8d44\u6e90\nhelm del --purge chaosblade-operator\n")),(0,r.kt)("h3",{id:"23-chaosblade-box-\u642d\u5efa"},"2.3 ChaosBlade Box \u642d\u5efa"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/chaosblade-io/chaosblade-box"},"ChaosBlade Box \u4e0b\u8f7d\u5730\u5740")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"1\u3001\u4e0b\u8f7d chaosblade-box\nwget https://github.com/chaosblade-io/chaosblade-box/releases/download/v1.0.3/chaosblade-box-1.0.3.tgz\n\n2\u3001\u5b89\u88c5 chaosblade-box\nhelm install chaosblade-box chaosblade-box-1.0.3.tgz --namespace chaosblade \\\n--set spring.datasource.password=DATASOURCE_PASSWORD\n\n3\u3001\u67e5\u770b pod\nkubectl get pod -n chaosblade\n\u67e5\u770b pod \u8be6\u7ec6\u4fe1\u606f\nkubectl describe pod `kubectl get pod -n chaosblade |grep chaosblade-box |awk -F \" \" 'NR==1{print $1}'` -n chaosblade\n\n4\u3001\u67e5\u770b svc\nkubectl get svc -n chaosblade\n\n5\u3001\u67e5\u770b\u65e5\u5fd7\nkubectl logs -f `kubectl get pod -n chaosblade |grep chaosblade-box |awk -F \" \" 'NR==1{print $1}'` -n chaosblade\n\n6\u3001\u9a8c\u8bc1\n\u6267\u884c kubectl get svc -n chaosblade \u62ff\u5230\u7aef\u53e3\u53f7\n\u8bbf\u95ee http://127.0.0.1:32179/\n\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\uff0c\u8bbe\u7f6e\u8d26\u53f7\u5bc6\u7801\uff1aroot/root\n\n7\u3001\u5378\u8f7d chaosblade-box\nhelm uninstall chaosblade-box -n chaosblade\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"ChaosBlade Box \u9875\u9762")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"chaosblade",src:n(4272).Z,width:"1512",height:"749"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b89\u88c5\u63a2\u9488")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"1\u3001Helm chart \u5305\u4e0b\u8f7d\nwget https://chaosblade.oss-cn-hangzhou.aliyuncs.com/platform/release/1.0.2/chaosblade-box-agent-1.0.2.tgz -O chaos.tgz\n\n2\u3001Helm v3 \u5b89\u88c5\u63a2\u9488\uff08\u67e5\u770b helm \u7248\u672c\uff1ahelm version\uff09\n\u547d\u4ee4\uff1ahelm install agent chaos.tgz --namespace chaosblade --set env.name=default,license=aa0ec9b38ac0411593883bc643458d74,images.chaos.repository=chaosbladeio/chaosblade-agent,images.chaos.version=1.0.2,transport.endpoint={\u66ff\u6362\u4e3a box \u7684 ip:port},controller.cluster_id={\u66ff\u6362\u4e3a\u96c6\u7fa4 id\uff0c\u53d6\u503c\u65e0\u7279\u6b8a\u8981\u6c42},controller.cluster_name={\u66ff\u6362\u4e3a\u96c6\u7fa4\u540d\u5b57\uff0c\u53d6\u503c\u65e0\u7279\u6b8a\u8981\u6c42}\n\n\u67e5\u770b\u96c6\u7fa4\u540d\u79f0\uff1akubectl get node\n\u67e5\u770b box \u7684 ip:port\uff1akubectl get svc -n chaosblade |grep chaosblade-box |grep 7001\n\u67e5\u770b cluster_id\uff1akubectl get configmap cluster-info -n kube-public -o json\n\n\u4e3e\u4f8b\uff1ahelm install agent chaos.tgz --namespace chaosblade --set env.name=default,license=aa0ec9b38ac0411593883bc643458d74,images.chaos.repository=chaosbladeio/chaosblade-agent,images.chaos.version=1.0.2,transport.endpoint=10.43.194.110:7001,controller.cluster_id=0a6910e9-4948-49a8-b896-026c84dd02f6,controller.cluster_name=k8s-master\n\n3\u3001\u5378\u8f7d agent\nhelm uninstall agent -n chaosblade\n")),(0,r.kt)("h2",{id:"3-chaosblade-\u5b9e\u9a8c"},"3. ChaosBlade \u5b9e\u9a8c"),(0,r.kt)("h3",{id:"31-chaosblade-\u573a\u666f"},"3.1 ChaosBlade \u573a\u666f"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(3236).Z,width:"2078",height:"1220"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ck          Clickhouse experiment \ncplus       C++ chaos experiments\ncpu         Cpu experiment\ncri         CRI experiment\ndisk        Disk experiment\ndocker      Docker experiment\ndruid       Experiment with the Druid\ndubbo       Experiment with the Dubbo\nes          ElasticSearch experiment!\nfeign       feign experiment\nfile        File experiment\ngateway     gateway experiment!\nhbase       hbase experiment!\nhttp        http experiment\njedis       jedis experiment\njvm         Experiment with the JVM\nk8s         Kubernetes experiment\nkafka       kafka experiment\nlettuce     redis client lettuce experiment\nlog         log experiment\nmem         Mem experiment\nmongodb     MongoDB experiment\nmysql       mysql experiment\nnetwork     Network experiment\nprocess     Process experiment\npsql        Postgrelsql experiment\nrabbitmq    rabbitmq experiment\nredisson    redisson experiment\nrocketmq    Rocketmq experiment,can make message send or pull delay and exception\nscript      Script chaos experiment\nservlet     java servlet experiment\nstrace      strace experiment\nsystemd     Systemd experiment\ntars        tars experiment\ntime        Time experiment\nzk          zk experiment\n")),(0,r.kt)("h3",{id:"32-chaosblade-\u57fa\u7840"},"3.2 ChaosBlade \u57fa\u7840"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u8003\u8d44\u6599"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://chaosblade.io/"},"ChaosBlade \u5b98\u7f51"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://chaosblade-io.gitbook.io/chaosblade-help-zh-cn/"},"ChaosBlade \u6587\u6863"),"   "),(0,r.kt)("h4",{id:"blade-demo"},"blade demo"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"1\u3001\u4e0b\u8f7d\u955c\u50cf\ndocker pull chaosbladeio/chaosblade-demo\n\n2\u3001\u8fd0\u884c demo \u5bb9\u5668\n\u5b98\u65b9\u547d\u4ee4\uff1adocker run -it --privileged chaosbladeio/chaosblade-demo\n\u6307\u5b9a\u540d\u79f0\uff1adocker run -it --privileged chaosbladeio/chaosblade-demo --name=chaosblade-demo\n\n3\u3001\u67e5\u770b\u8fdb\u7a0b\ndocker ps |grep chaosblade-demo\n\n4\u3001\u8fdb\u5165\u5bb9\u5668\ndocker exec -it chaosblade-demo bash\n\n5\u3001\u8fdb\u5165\u955c\u50cf\u4e4b\u540e\uff0c\u53ef\u9605\u8bfb README.md \u6587\u4ef6\u5b9e\u65bd\u6df7\u6c8c\u5b9e\u9a8c\uff0cEnjoy it\n\n6\u3001\u5220\u9664\u5bb9\u5668\ndocker rm -f chaosblade-demo\n")),(0,r.kt)("h4",{id:"blade-base"},"blade base"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"1\u3001blade check \n\u8be5\u547d\u4ee4\u4e3b\u8981\u7528\u4e8e Linux \u4e3b\u673a\u4e0a\u6f14\u7ec3\u5b9e\u9a8c\u65f6\uff0c\u5bf9\u4e3b\u673a\u73af\u5883\u8fdb\u884c\u6821\u9a8c\uff0c\u5224\u65ad\u5176\u662f\u5426\u6ee1\u8db3 chaosblade \u5b9e\u9a8c\u73af\u5883\n\u547d\u4ee4\uff1ablade check [command]\n\u4e3e\u4f8b\uff1ablade check os / blade check java\n\n2\u3001blade create\n\u521b\u5efa\u5b9e\u9a8c\n\u547d\u4ee4\uff1ablade create [command]\n\u4e3e\u4f8b\uff1ablade create cpu load --cpu-percent 60\n\n3\u3001blade destroy\n\u9500\u6bc1\u5b9e\u9a8c\n\u901a\u8fc7 UID \u9500\u6bc1 create \u7684\u5b9e\u9a8c\n\u547d\u4ee4\uff1ablade destroy [command]\n\u4e3e\u4f8b\uff1ablade destroy 64b361b56904546b\n\n\u901a\u8fc7 command \u9500\u6bc1 create \u7684\u5b9e\u9a8c\n\u547d\u4ee4\uff1ablade destroy <command>\n\u4e3e\u4f8b\uff1ablade destroy cpu fullload --cpu-count 1\n\n4\u3001blade prepare\n\u5e94\u7528\u5c42\u573a\u666f\u5728 create \u6ce8\u5165\u4e4b\u524d\uff0c\u5c06\u5e94\u7528\u5c42 agent \u6302\u8f7d\u5230\u76ee\u6807\u8fdb\u7a0b\u4e2d\uff0c\u76ee\u524d\u53ea\u6709 Java \u548cC++\u5e94\u7528\u5c42\u573a\u666f\u9700\u8981\u3002\n\u547d\u4ee4\uff1ablade prepare [command]\n\u4e3e\u4f8b\uff1aprepare jvm --process tomcat\n\n5\u3001blade query\n\u67e5\u770b\u5b9e\u9a8c\n\u547d\u4ee4\uff1ablade query [command]\n\u4e3e\u4f8b\uff1ablade query 64b361b56904546b\n\n\u547d\u4ee4\uff1ablade query k8s create <UID>\n\u4e3e\u4f8b\uff1ablade query k8s create 64b361b56904546b\n\n6\u3001blade revoke\n\u64a4\u9500\u5b9e\u9a8c\n\u547d\u4ee4\uff1ablade revoke <UID>\n\u4e3e\u4f8b\uff1ablade revoke 64b361b56904546b\n\n7\u3001blade status\n\u67e5\u770b\u5b9e\u9a8c\u4fe1\u606f\n\u547d\u4ee4\uff1ablade status <UID>\n\u4e3e\u4f8b\uff1ablade status 64b361b56904546b\n\n\u67e5\u770b\u67d0\u7c7b\u578b\u5b9e\u9a8c\u4fe1\u606f\nblade status --type create\nblade status --type destroy\nblade status --type prepare\n\n8\u3001blade version\n\u67e5\u770b blade \u7248\u672c\u4fe1\u606f\n\n\u5176\u5b83\n\u67e5\u770b\u6240\u6709\u5b9e\u9a8c id\uff08\u5e26\u53cc\u5f15\u53f7\uff09\nblade status --type create |jq '.result[].Uid'\n\u67e5\u770b\u6240\u6709\u5b9e\u9a8c id\uff08\u4e0d\u5e26\u53cc\u5f15\u53f7\uff09\nblade status --type create |jq -r '.result[].Uid'\n")),(0,r.kt)("h4",{id:"blade-server"},"blade server"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\u4ecb\u7ecd\n\u5728 server \u6a21\u5f0f\u4e0b\uff0cblade \u7a0b\u5e8f\u4f1a\u5bf9\u5916\u66b4\u9732 web \u670d\u52a1\uff0c\u4e0a\u5c42\u53ef\u901a\u8fc7 http \u8bf7\u6c42\u8c03\u7528\uff0c\u8bf7\u6c42\u683c\u5f0f\u662f chaosblade?cmd=\u5177\u4f53\u547d\u4ee4\uff0c\u4f8b\u5982\u6267\u884c CPU \u6ee1\u8f7d\uff0c\u5219\u8bf7\u6c42\u662f chaosblade?cmd=create%20cpu%20fullload\n\n\u542f\u52a8 server \u6a21\u5f0f\uff0c\u670d\u52a1\u7aef\u53e3\u662f 8080\nblade server start --port 8080\n\n\u505c\u6b62 blade server\nblade server stop\n\n\u89e6\u53d1\u5b9e\u9a8c\u573a\u666f\nhttp://127.0.0.1:8080/chaosblade?cmd=create cpu load --cpu-percent 80 --timeout 60\ncurl "http://127.0.0.1:8080/chaosblade?cmd=create%20cpu%20load%20--cpu-percent%2080%20--timeout%2060"\n\n\u9500\u6bc1\u5b9e\u9a8c\u573a\u666f\nhttp://127.0.0.1:8080/chaosblade?cmd=destroy e866e0cd3706ca72\ncurl "http://127.0.0.1:8080/chaosblade?cmd=destroy%20e866e0cd3706ca72"\n')),(0,r.kt)("h3",{id:"32-chaosblade-\u5b9e\u9a8c"},"3.2 ChaosBlade \u5b9e\u9a8c"),(0,r.kt)("h4",{id:"blade-create-cpu-load"},"blade create cpu load"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u4ecb\u7ecd\nCPU \u76f8\u5173\u7684\u6df7\u6c8c\u5b9e\u9a8c\u5305\u542b CPU \u6ee1\u8f7d\uff0c\u53ef\u4ee5\u6307\u5b9a\u6838\u6570\u3001\u5177\u4f53\u6838\u6ee1\u8f7d\u6216\u8005\u603b CPU \u8d1f\u8f7d\u767e\u5206\u6bd4\u3002\n\u65e8\u5728 CPU \u5728\u7279\u5b9a\u8d1f\u8f7d\u4e0b\uff0c\u9a8c\u8bc1\u670d\u52a1\u8d28\u91cf\u3001\u76d1\u63a7\u544a\u8b66\u3001\u6d41\u91cf\u8c03\u5ea6\u3001\u5f39\u6027\u4f38\u7f29\u7b49\u80fd\u529b\u3002\nload\u3001fullload\u3001fl \u547d\u4ee4\u90fd\u53ef\u4ee5\uff0c\u5373 blade create cpu load\u3001blade create cpu fullload \u6216 blade create cpu fl\n\n\u6267\u884c\u547d\u4ee4\uff1a\nblade create cpu load [flags]\n\n\u53c2\u6570\n--timeout string       \u8bbe\u5b9a\u8fd0\u884c\u65f6\u957f\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u901a\u7528\u53c2\u6570\n--cpu-count string     \u6307\u5b9a CPU \u6ee1\u8f7d\u7684\u4e2a\u6570\n--cpu-list string      \u6307\u5b9a CPU \u6ee1\u8f7d\u7684\u5177\u4f53\u6838\uff0c\u6838\u7d22\u5f15\u4ece 0 \u5f00\u59cb (0-3 or 1,3)\n--cpu-percent string   \u6307\u5b9a CPU \u8d1f\u8f7d\u767e\u5206\u6bd4\uff0c\u53d6\u503c\u5728 0-100\n\n\u6848\u4f8b\n# \u521b\u5efa CPU \u6ee1\u8f7d\u5b9e\u9a8c\nblade create cpu load\n\n# \u6307\u5b9a\u968f\u673a\u4e24\u4e2a\u6838\u6ee1\u8f7d\nblade create cpu load --cpu-count 2\n\n# \u6307\u5b9a\u7d22\u5f15\u662f 0\uff0c3 \u7684\u6838\u6ee1\u8f7d\uff0c\u6838\u7684\u7d22\u5f15\u4ece 0 \u5f00\u59cb\nblade create cpu load --cpu-list 0,3\n\n# \u6307\u5b9a\u7d22\u5f15 1 \u5230 3 \u7684\u6838\u6ee1\u8f7d\nblade create cpu load --cpu-list 1-3\n\n# \u6307\u5b9a\u767e\u5206\u6bd4\u8d1f\u8f7d\nblade create cpu load --cpu-percent 60\n\n\u5b9e\u8df5\nblade create cpu load --cpu-percent 60 --timeout 30 \n\n\u68c0\u67e5\ntop\n")),(0,r.kt)("h4",{id:"blade-create-disk-burn"},"blade create disk burn"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u4ecb\u7ecd\n\u63d0\u5347\u78c1\u76d8\u8bfb\u5199 io \u8d1f\u8f7d\uff0c\u53ef\u4ee5\u6307\u5b9a\u53d7\u5f71\u54cd\u7684\u76ee\u5f55\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u8bfb\u5199\u7684\u5757\u5927\u5c0f\u63d0\u5347 io \u8d1f\u8f7d\uff0c\u9ed8\u8ba4\u503c\u662f 10\uff0c\u5355\u4f4d\u662f M\uff0c\u5757\u7684\u6570\u91cf\u56fa\u5b9a\u4e3a 100\uff0c\u5373\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5199\u4f1a\u5360\u7528 1000M \u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u8bfb\u4f1a\u56fa\u5b9a\u5360\u7528 600M \u7684\u7a7a\u95f4\uff0c\u56e0\u4e3a\u8bfb\u64cd\u4f5c\u4f1a\u5148\u521b\u5efa\u4e00\u4e2a 600M \u7684\u56fa\u5b9a\u5927\u5c0f\u6587\u4ef6\uff0c\u9884\u8ba1 3s \u4e4b\u5185\uff0c\u5728\u521b\u5efa\u65f6\u5199 io \u4f1a\u5347\u9ad8\u3002\n\u9a8c\u8bc1\u78c1\u76d8 io \u9ad8\u8d1f\u8f7d\u4e0b\u5bf9\u7cfb\u7edf\u670d\u52a1\u7684\u5f71\u54cd\uff0c\u6bd4\u5982\u76d1\u63a7\u544a\u8b66\u3001\u670d\u52a1\u7a33\u5b9a\u6027\u7b49\u3002\n\n\u53c2\u6570\n--path string      \u6307\u5b9a\u63d0\u5347\u78c1\u76d8 io \u7684\u76ee\u5f55\uff0c\u4f1a\u4f5c\u7528\u4e8e\u5176\u6240\u5728\u7684\u78c1\u76d8\u4e0a\uff0c\u9ed8\u8ba4\u503c\u662f /\n--read             \u89e6\u53d1\u63d0\u5347\u78c1\u76d8\u8bfb IO \u8d1f\u8f7d\uff0c\u4f1a\u521b\u5efa 600M \u7684\u6587\u4ef6\u7528\u4e8e\u8bfb\uff0c\u9500\u6bc1\u5b9e\u9a8c\u4f1a\u81ea\u52a8\u5220\u9664\n--size string      \u5757\u5927\u5c0f, \u5355\u4f4d\u662f M, \u9ed8\u8ba4\u503c\u662f 10\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u4fee\u6539\uff0c\u9664\u975e\u60f3\u66f4\u5927\u7684\u63d0\u9ad8 io \u8d1f\u8f7d\n--timeout string   \u8bbe\u5b9a\u8fd0\u884c\u65f6\u957f\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u901a\u7528\u53c2\u6570\n--write            \u89e6\u53d1\u63d0\u5347\u78c1\u76d8\u5199 IO \u8d1f\u8f7d\uff0c\u4f1a\u6839\u636e\u5757\u5927\u5c0f\u7684\u503c\u6765\u5199\u5165\u4e00\u4e2a\u6587\u4ef6\uff0c\u6bd4\u5982\u5757\u5927\u5c0f\u662f 10\uff0c\u5219\u56fa\u5b9a\u7684\u5757\u7684\u6570\u91cf\u662f 100\uff0c\u5219\u4f1a\u521b\u5efa 1000M \u7684\u6587\u4ef6\uff0c\u9500\u6bc1\u5b9e\u9a8c\u4f1a\u81ea\u52a8\u5220\u9664\n\n\u6848\u4f8b\n# \u4e3b\u8981\u89c2\u5bdf rkB/s\u3001wkB/s\u3001%util \u6570\u636e\u3002\u6267\u884c\u78c1\u76d8\u8bfb IO \u8d1f\u8f7d\u9ad8\u573a\u666f\nblade create disk burn --read --path /home\n\n# \u9500\u6bc1\u4e0a\u8ff0\u5b9e\u9a8c\u540e\uff0c\u6267\u884c\u78c1\u76d8\u5199 IO \u8d1f\u8f7d\u9ad8\u573a\u666f\nblade create disk burn --write --path /home\n\n# \u53ef\u540c\u65f6\u6267\u884c\u8bfb\u5199 IO \u8d1f\u8f7d\u573a\u666f\uff0c\u4e0d\u6307\u5b9a path\uff0c\u9ed8\u8ba4\u503c\u662f /\nblade create disk burn --read --write\n\n\u5b9e\u8df5\nblade create disk burn --read --write --path /home --timeout 60\n\n\u68c0\u67e5\niostat -x -t 5\n")),(0,r.kt)("h4",{id:"blade-create-disk-fill"},"blade create disk fill"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u4ecb\u7ecd\n\u6a21\u62df\u78c1\u76d8\u586b\u5145\uff0c\u53ef\u4ee5\u6307\u5b9a\u586b\u5145\u7684\u76ee\u5f55\u548c\u586b\u5145\u5927\u5c0f\u3002\n\u9a8c\u8bc1\u78c1\u76d8\u6ee1\u4e0b\u5bf9\u7cfb\u7edf\u670d\u52a1\u7684\u5f71\u54cd\uff0c\u6bd4\u5982\u76d1\u63a7\u544a\u8b66\u3001\u670d\u52a1\u7a33\u5b9a\u6027\u7b49\u3002\n\n\u53c2\u6570\n--path string      \u9700\u8981\u586b\u5145\u7684\u76ee\u5f55\uff0c\u9ed8\u8ba4\u503c\u662f /\n--size string      \u9700\u8981\u586b\u5145\u7684\u6587\u4ef6\u5927\u5c0f\uff0c\u5355\u4f4d\u662f M\uff0c\u53d6\u503c\u662f\u6574\u6570\uff0c\u4f8b\u5982 --size 1024\n--reserve string   \u4fdd\u7559\u78c1\u76d8\u5927\u5c0f\uff0c\u5355\u4f4d\u662f MB\u3002\u53d6\u503c\u662f\u4e0d\u5305\u542b\u5355\u4f4d\u7684\u6b63\u6574\u6570\uff0c\u4f8b\u5982 --reserve 1024\u3002\u5982\u679c size\u3001percent\u3001reserve \u53c2\u6570\u90fd\u5b58\u5728\uff0c\u4f18\u5148\u7ea7\u662f percent > reserve > size\n--percent string   \u6307\u5b9a\u78c1\u76d8\u4f7f\u7528\u7387\uff0c\u53d6\u503c\u662f\u4e0d\u5e26%\u53f7\u7684\u6b63\u6574\u6570\uff0c\u4f8b\u5982 --percent 80\n--retain-handle    \u662f\u5426\u4fdd\u7559\u586b\u5145\n--timeout string   \u8bbe\u5b9a\u8fd0\u884c\u65f6\u957f\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u901a\u7528\u53c2\u6570\n\n\u6848\u4f8b\n# \u6267\u884c\u78c1\u76d8\u586b\u5145\uff0c\u586b\u5145 40G\uff0c\u5373\u8fbe\u5230\u78c1\u76d8\u6ee1\u7684\u6548\u679c\uff08\u53ef\u752834G\uff09\nblade create disk fill --path /home --size 40000\n\n# \u6267\u884c\u6309\u767e\u5206\u6bd4\u586b\u5145\u78c1\u76d8\uff0c\u5e76\u4e14\u4fdd\u7559\u586b\u5145\u78c1\u76d8\u7684\u6587\u4ef6\u53e5\u67c4\nblade c disk fill --path /home --percent 80 --retain-handle\n\n# \u67e5\u770b\u6587\u4ef6\u53e5\u67c4\nlsof /home/chaos_filldisk.log.dat\n\n# \u6267\u884c\u4fdd\u7559\u56fa\u5b9a\u5927\u5c0f\u5b9e\u9a8c\u573a\u666f\nblade c disk fill --path /home --reserve 1024\n\n\u5b9e\u8df5\nblade create disk fill --path /home --size 40000 --timeout 60\nblade create disk fill --path /home --percent 80 --timeout 60\n\n\u68c0\u67e5\ndf -h /home\ndu -sh * | sort -n\n")),(0,r.kt)("h4",{id:"blade-create-mem-load"},"blade create mem load"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u4ecb\u7ecd\n\u6307\u5b9a\u5185\u5b58\u5360\u7528\uff0c\u6ce8\u610f\uff0c\u6b64\u573a\u666f\u89e6\u53d1\u5185\u5b58\u5360\u7528\u6ee1\uff0c\u5373\u4f7f\u6307\u5b9a\u4e86 --timeout \u53c2\u6570\uff0c\u4e5f\u53ef\u80fd\u51fa\u73b0\u901a\u8fc7 blade \u5de5\u5177\u65e0\u6cd5\u6062\u590d\u7684\u60c5\u51b5\uff0c\u53ef\u901a\u8fc7\u91cd\u542f\u673a\u5668\u89e3\u51b3\uff01\uff01\uff01\u63a8\u8350\u6307\u5b9a\u5185\u5b58\u767e\u5206\u6bd4\uff01\n\u7531\u4e8e\u76ee\u524d\u5185\u5b58\u5927\u5c0f\u8ba1\u7b97\u901a\u8fc7 memory.stat \u7b49\u6587\u4ef6\u8ba1\u7b97\uff0c\u6240\u4ee5\u548c free \u547d\u4ee4\u8ba1\u7b97\u4e0d\u4e00\u81f4\uff0c\u540c top \u547d\u4ee4\u4e00\u81f4\uff0c\u9a8c\u8bc1\u65f6\u8bf7\u4f7f\u7528 top \u547d\u4ee4\u67e5\u770b\u5185\u5b58\u4f7f\u7528\u3002\u540e\u7eed\u4f1a\u9488\u5bf9\u5185\u5b58\u5360\u7528\u573a\u666f\u8fdb\u884c\u4f18\u5316\u3002\n\n\u53c2\u6570\n--mem-percent string    \u5185\u5b58\u4f7f\u7528\u7387\uff0c\u53d6\u503c\u662f 0 \u5230 100 \u7684\u6574\u6570\n--mode string   \u5185\u5b58\u5360\u7528\u6a21\u5f0f\uff0c\u6709 ram \u548c cache \u4e24\u79cd\uff0c\u4f8b\u5982 --mode ram\u3002ram \u91c7\u7528\u4ee3\u7801\u5b9e\u73b0\uff0c\u53ef\u63a7\u5236\u5360\u7528\u901f\u7387\uff0c\u4f18\u5148\u63a8\u8350\u6b64\u6a21\u5f0f\uff1bcache \u662f\u901a\u8fc7\u6302\u8f7d tmpfs \u5b9e\u73b0\uff1b\u9ed8\u8ba4\u503c\u662f --mode cache\n--reserve string    \u4fdd\u7559\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\u662f MB\uff0c\u5982\u679c mem-percent \u53c2\u6570\u5b58\u5728\uff0c\u5219\u4f18\u5148\u4f7f\u7528 mem-percent \u53c2\u6570\n--rate string \u5185\u5b58\u5360\u7528\u901f\u7387\uff0c\u5355\u4f4d\u662f MB/S\uff0c\u4ec5\u5728 --mode ram \u65f6\u751f\u6548\n--timeout string   \u8bbe\u5b9a\u8fd0\u884c\u65f6\u957f\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u901a\u7528\u53c2\u6570\n\n\u6848\u4f8b\n# \u6267\u884c\u5185\u5b58\u5360\u7528 50%\nblade c mem load --mode ram --mem-percent 50\n\n# \u4fdd\u7559 200M \u5185\u5b58\uff0c\u603b\u5185\u5b58\u5927\u5c0f 1G\nblade c mem load --mode ram --reserve 200 --rate 100\n\n\u5b9e\u8df5\nblade create mem load --mode ram --mem-percent 80 --timeout 60\n\n\u68c0\u67e5\nfree -m / top\n")),(0,r.kt)("h4",{id:"blade-create-network-delay"},"blade create network delay"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u4ecb\u7ecd\n\u53ef\u4ee5\u6307\u5b9a\u7f51\u5361\u3001\u672c\u5730\u7aef\u53e3\u3001\u8fdc\u7a0b\u7aef\u53e3\u3001\u76ee\u6807 IP \u5ef6\u8fdf\u3002\u9700\u8981\u7279\u522b\u6ce8\u610f\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u7aef\u53e3\u3001ip \u53c2\u6570\uff0c\u800c\u662f\u6574\u4e2a\u7f51\u5361\u5ef6\u8fdf\uff0c\u5207\u8bb0\u8981\u6dfb\u52a0 --timeout \u53c2\u6570\u6216\u8005 --exclude-port \u53c2\u6570\uff0c\u524d\u8005\u662f\u6307\u5b9a\u8fd0\u884c\u65f6\u95f4\uff0c\u81ea\u52a8\u505c\u6b62\u9500\u6bc1\u5b9e\u9a8c\uff0c\u540e\u8005\u662f\u6307\u5b9a\u6392\u9664\u6389\u7684\u5ef6\u8fdf\u7aef\u53e3\uff0c\u4e24\u8005\u90fd\u662f\u9632\u6b62\u56e0\u5ef6\u8fdf\u65f6\u95f4\u8bbe\u7f6e\u592a\u957f\uff0c\u9020\u6210\u673a\u5668\u65e0\u6cd5\u8fde\u63a5\u7684\u60c5\u51b5\uff0c\u5982\u679c\u771f\u5b9e\u53d1\u751f\u6b64\u95ee\u9898\uff0c\u91cd\u542f\u673a\u5668\u5373\u53ef\u6062\u590d\u3002\n\u672c\u5730\u7aef\u53e3\u548c\u8fdc\u7a0b\u7aef\u53e3\u4e4b\u95f4\u662f\u6216\u7684\u5173\u7cfb\uff0c\u5373\u8fd9\u4e24\u4e2a\u7aef\u53e3\u90fd\u4f1a\u53d1\u751f\u5ef6\u8fdf\uff0c\u53ea\u8981\u6307\u5b9a\u4e86\u672c\u5730\u7aef\u53e3\u6216\u8005\u8fdc\u7a0b\u7aef\u53e3\uff0c\u65e0\u9700\u6307\u5b9a\u9700\u8981\u6392\u9664\u7684\u7aef\u53e3\u3002\u7aef\u53e3\u4e0e IP \u4e4b\u95f4\u662f\u4e0e\u7684\u5173\u7cfb\uff0c\u5373\u6307\u5b9a\u7684 IP:PORT \u53d1\u751f\u5ef6\u8fdf\u3002\n\u7f51\u7edc\u5ef6\u8fdf\u573a\u666f\u4e3b\u8981\u9a8c\u8bc1\u7f51\u7edc\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u7684\u81ea\u6211\u5bb9\u9519\u80fd\u529b\u3002\n\n\u53c2\u6570\n--destination-ip string   \u76ee\u6807 IP. \u652f\u6301\u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u6765\u6307\u5b9a\u4e00\u4e2a\u7f51\u6bb5\u7684 IP \u5730\u5740, \u4f8b\u5982 192.168.1.0/24. \u5219 192.168.1.0~192.168.1.255 \u90fd\u751f\u6548\u3002\u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u56fa\u5b9a\u7684 IP\uff0c\u5982 192.168.1.1 \u6216\u8005 192.168.1.1/32\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u90fd\u53f7\u5206\u9694\u591a\u4e2a\u53c2\u6570\uff0c\u4f8b\u5982 192.168.1.1,192.168.2.1\u3002\n--exclude-port string     \u6392\u9664\u6389\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4f1a\u5ffd\u7565\u6389\u901a\u4fe1\u7684\u5bf9\u7aef\u7aef\u53e3\uff0c\u76ee\u7684\u662f\u4fdd\u7559\u901a\u4fe1\u53ef\u7528\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\u6216\u8005\u8fde\u63a5\u7b26\u8868\u793a\u8303\u56f4\uff0c\u4f8b\u5982 22,8000 \u6216\u8005 8000-8010\u3002 \u8fd9\u4e2a\u53c2\u6570\u4e0d\u80fd\u4e0e --local-port \u6216\u8005 --remote-port \u53c2\u6570\u4e00\u8d77\u4f7f\u7528\n--exclude-ip string       \u6392\u9664\u53d7\u5f71\u54cd\u7684 IP\uff0c\u652f\u6301\u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u6765\u6307\u5b9a\u4e00\u4e2a\u7f51\u6bb5\u7684 IP \u5730\u5740, \u4f8b\u5982 192.168.1.0/24. \u5219 192.168.1.0~192.168.1.255 \u90fd\u751f\u6548\u3002\u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u56fa\u5b9a\u7684 IP\uff0c\u5982 192.168.1.1 \u6216\u8005 192.168.1.1/32\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u90fd\u53f7\u5206\u9694\u591a\u4e2a\u53c2\u6570\uff0c\u4f8b\u5982 192.168.1.1,192.168.2.1\u3002\n--interface string        \u7f51\u5361\u8bbe\u5907\uff0c\u4f8b\u5982 eth0 (\u5fc5\u8981\u53c2\u6570)\n--local-port string       \u672c\u5730\u7aef\u53e3\uff0c\u4e00\u822c\u662f\u672c\u673a\u66b4\u9732\u670d\u52a1\u7684\u7aef\u53e3\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\u6216\u8005\u8fde\u63a5\u7b26\u8868\u793a\u8303\u56f4\uff0c\u4f8b\u5982 80,8000-8080\n--offset string           \u5ef6\u8fdf\u65f6\u95f4\u4e0a\u4e0b\u6d6e\u52a8\u7684\u503c, \u5355\u4f4d\u662f\u6beb\u79d2\n--remote-port string      \u8fdc\u7a0b\u7aef\u53e3\uff0c\u4e00\u822c\u662f\u8981\u8bbf\u95ee\u7684\u5916\u90e8\u66b4\u9732\u670d\u52a1\u7684\u7aef\u53e3\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\u6216\u8005\u8fde\u63a5\u7b26\u8868\u793a\u8303\u56f4\uff0c\u4f8b\u5982 80,8000-8080\n--time string             \u5ef6\u8fdf\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 (\u5fc5\u8981\u53c2\u6570)\n--force                   \u5f3a\u5236\u8986\u76d6\u5df2\u6709\u7684 tc \u89c4\u5219\uff0c\u8bf7\u52a1\u5fc5\u5728\u660e\u786e\u4e4b\u524d\u7684\u89c4\u5219\u53ef\u8986\u76d6\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\n--ignore-peer-port        \u9488\u5bf9\u6dfb\u52a0 --exclude-port \u53c2\u6570\uff0c\u62a5 ss \u547d\u4ee4\u627e\u4e0d\u5230\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff0c\u5ffd\u7565\u6392\u9664\u7aef\u53e3\n--timeout string          \u8bbe\u5b9a\u8fd0\u884c\u65f6\u957f\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u901a\u7528\u53c2\u6570\n\n\u6848\u4f8b\n# \u8bbf\u95ee\u672c\u673a 8080 \u548c 8081 \u7aef\u53e3\u5ef6\u8fdf 3 \u79d2\uff0c\u5ef6\u8fdf\u65f6\u95f4\u4e0a\u4e0b\u6d6e\u52a8 1 \u79d2\nblade create network delay --time 3000 --offset 1000 --interface eth0 --local-port 8080,8081\n\n# \u53ef\u4ee5\u5728\u53e6\u4e00\u53f0\u76f8\u540c\u7f51\u7edc\u5185\u7684\u673a\u5668\u901a\u8fc7 telnet \u547d\u4ee4\u9a8c\u8bc1\uff0c\u5373 telnet xxx.xxx.xxx.xxx 8080\n# \u9500\u6bc1\u5b9e\u9a8c\nblade destroy 9b4aa9fabe073624\n\n# \u672c\u673a\u8bbf\u95ee\u5916\u90e8 14.215.177.39 \u673a\u5668\uff08ping www.baidu.com \u83b7\u53d6\u5230\u7684 IP\uff0980 \u7aef\u53e3\u5ef6\u8fdf 3 \u79d2\nblade create network delay --time 3000 --interface eth0 --remote-port 80 --destination-ip 14.215.177.39\n\n# \u53ef\u5728\u672c\u673a\u901a\u8fc7 telnet 14.215.177.39 80 \u547d\u4ee4\u9a8c\u8bc1\n# \u5bf9\u6574\u4e2a\u7f51\u5361 eth0 \u505a 5 \u79d2\u5ef6\u8fdf\uff0c\u6392\u9664 22 \u548c 8000\u52308080 \u7aef\u53e3\nblade create network delay --time 5000 --interface eth0 --exclude-port 22,8000-8080\n\n# \u4f1a\u53d1\u73b0 22 \u7aef\u53e3\u548c 8000 \u5230 8080 \u7aef\u53e3\u4e0d\u53d7\u5f71\u54cd\uff0c\u53ef\u5728\u53e6\u4e00\u53f0\u76f8\u540c\u7f51\u7edc\u5185\u7684\u673a\u5668\u901a\u8fc7\u5206\u522b telnet xxx.xxx.xxx.xxx 8080 \u548c telnet xxx.xxx.xxx.xxx 8081 \u8fdb\u884c\u6d4b\u8bd5\n\n\u5b9e\u8df5\nblade create network delay --time 3000 --offset 1000 --interface eth0 --local-port 3000 --timeout 10\n\n\u68c0\u67e5\ntelnet 127.0.0.1 3000\n")),(0,r.kt)("h4",{id:"blade-create-network-dns"},"blade create network dns"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u7be1\u6539 dns \u57df\u540d\u89e3\u6790\u5b9e\u9a8c\u573a\u666f\n\n\u4ecb\u7ecd\n\u6b64\u5b9e\u9a8c\u4f1a\u4fee\u6539\u672c\u5730\u7684 hosts\uff0c\u7be1\u6539\u57df\u540d\u5730\u5740\u6620\u5c04\u3002\n\u7f51\u7edc\u4e22\u5305\u573a\u666f\u4e3b\u8981\u9a8c\u8bc1\u57df\u540d\u89e3\u6790\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u7684\u81ea\u6211\u5bb9\u9519\u80fd\u529b\u3002\n\n\u53c2\u6570\n--domain string    \u57df\u540d (\u5fc5\u8981\u53c2\u6570)\n--ip string        \u6620\u5c04\u7684 ip (\u5fc5\u8981\u53c2\u6570)\n--timeout string   \u8bbe\u5b9a\u8fd0\u884c\u65f6\u957f\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u901a\u7528\u53c2\u6570\n\n\u6848\u4f8b\n# www.baidu.com \u57df\u540d\u4e0d\u53ef\u8bbf\u95ee\nblade create network dns --domain www.baidu.com --ip 10.0.0.0\n\n# \u4f7f\u7528 ping www.baidu.com \u6765\u9a8c\u8bc1\uff0c\u4f1a\u53d1\u73b0\u8bbf\u95ee\u4e0d\u901a\u3002\n\n\u5b9e\u8df5\nblade create network dns --domain www.baidu.com --ip 10.0.0.0\n")),(0,r.kt)("h4",{id:"blade-create-network-loss"},"blade create network loss"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u7f51\u7edc\u4e22\u5305\u5b9e\u9a8c\u573a\u666f\n\u4ecb\u7ecd\n\u53ef\u4ee5\u6307\u5b9a\u7f51\u5361\u3001\u672c\u5730\u7aef\u53e3\u3001\u8fdc\u7a0b\u7aef\u53e3\u3001\u76ee\u6807 IP \u4e22\u5305\u3002\u9700\u8981\u7279\u522b\u6ce8\u610f\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u7aef\u53e3\u3001ip \u53c2\u6570\uff0c\u800c\u662f\u6574\u4e2a\u7f51\u5361\u4e22\u5305\uff0c\u5207\u8bb0\u8981\u6dfb\u52a0 --timeout \u53c2\u6570\u6216\u8005 --exclude-port \u53c2\u6570\uff0c\u524d\u8005\u662f\u6307\u5b9a\u8fd0\u884c\u65f6\u95f4\uff0c\u81ea\u52a8\u505c\u6b62\u9500\u6bc1\u5b9e\u9a8c\uff0c\u540e\u8005\u662f\u6307\u5b9a\u6392\u9664\u6389\u7684\u4e22\u5305\u7aef\u53e3\uff0c\u4e24\u8005\u90fd\u662f\u9632\u6b62\u56e0\u4e22\u5305\u7387\u8bbe\u7f6e\u592a\u9ad8\uff0c\u9020\u6210\u673a\u5668\u65e0\u6cd5\u8fde\u63a5\u7684\u60c5\u51b5\uff0c\u5982\u679c\u771f\u5b9e\u53d1\u751f\u6b64\u95ee\u9898\uff0c\u91cd\u542f\u673a\u5668\u5373\u53ef\u6062\u590d\u3002\n\u672c\u5730\u7aef\u53e3\u548c\u8fdc\u7a0b\u7aef\u53e3\u4e4b\u95f4\u662f\u6216\u7684\u5173\u7cfb\uff0c\u5373\u8fd9\u4e24\u4e2a\u7aef\u53e3\u90fd\u4f1a\u53d1\u751f\u4e22\u5305\uff0c\u53ea\u8981\u6307\u5b9a\u4e86\u672c\u5730\u7aef\u53e3\u6216\u8005\u8fdc\u7a0b\u7aef\u53e3\uff0c\u65e0\u9700\u6307\u5b9a\u9700\u8981\u6392\u9664\u7684\u7aef\u53e3\u3002\u7aef\u53e3\u4e0e IP \u4e4b\u95f4\u662f\u4e0e\u7684\u5173\u7cfb\uff0c\u5373\u6307\u5b9a\u7684 IP:PORT \u53d1\u751f\u4e22\u5305\u3002\n\u7f51\u7edc\u4e22\u5305\u573a\u666f\u4e3b\u8981\u9a8c\u8bc1\u7f51\u7edc\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u7684\u81ea\u6211\u5bb9\u9519\u80fd\u529b\u3002\n\n\u53c2\u6570\n--destination-ip string   \u76ee\u6807 IP. \u652f\u6301\u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u6765\u6307\u5b9a\u4e00\u4e2a\u7f51\u6bb5\u7684 IP \u5730\u5740, \u4f8b\u5982 192.168.1.0/24. \u5219 192.168.1.0~192.168.1.255 \u90fd\u751f\u6548\u3002\u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u56fa\u5b9a\u7684 IP\uff0c\u5982 192.168.1.1 \u6216\u8005 192.168.1.1/32\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u90fd\u53f7\u5206\u9694\u591a\u4e2a\u53c2\u6570\uff0c\u4f8b\u5982 192.168.1.1,192.168.2.1\u3002\n--exclude-port string     \u6392\u9664\u6389\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4f1a\u5ffd\u7565\u6389\u901a\u4fe1\u7684\u5bf9\u7aef\u7aef\u53e3\uff0c\u76ee\u7684\u662f\u4fdd\u7559\u901a\u4fe1\u53ef\u7528\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\u6216\u8005\u8fde\u63a5\u7b26\u8868\u793a\u8303\u56f4\uff0c\u4f8b\u5982 22,8000 \u6216\u8005 8000-8010\u3002 \u8fd9\u4e2a\u53c2\u6570\u4e0d\u80fd\u4e0e --local-port \u6216\u8005 --remote-port \u53c2\u6570\u4e00\u8d77\u4f7f\u7528\n--exclude-ip string       \u6392\u9664\u53d7\u5f71\u54cd\u7684 IP\uff0c\u652f\u6301\u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u6765\u6307\u5b9a\u4e00\u4e2a\u7f51\u6bb5\u7684 IP \u5730\u5740, \u4f8b\u5982 192.168.1.0/24. \u5219 192.168.1.0~192.168.1.255 \u90fd\u751f\u6548\u3002\u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u56fa\u5b9a\u7684 IP\uff0c\u5982 192.168.1.1 \u6216\u8005 192.168.1.1/32\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u90fd\u53f7\u5206\u9694\u591a\u4e2a\u53c2\u6570\uff0c\u4f8b\u5982 192.168.1.1,192.168.2.1\u3002\n--interface string        \u7f51\u5361\u8bbe\u5907\uff0c\u4f8b\u5982 eth0 (\u5fc5\u8981\u53c2\u6570)\n--local-port string       \u672c\u5730\u7aef\u53e3\uff0c\u4e00\u822c\u662f\u672c\u673a\u66b4\u9732\u670d\u52a1\u7684\u7aef\u53e3\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\u6216\u8005\u8fde\u63a5\u7b26\u8868\u793a\u8303\u56f4\uff0c\u4f8b\u5982 80,8000-8080\n--percent string          \u4e22\u5305\u767e\u5206\u6bd4\uff0c\u53d6\u503c\u5728[0, 100]\u7684\u6b63\u6574\u6570 (\u5fc5\u8981\u53c2\u6570)\n--remote-port string      \u8fdc\u7a0b\u7aef\u53e3\uff0c\u4e00\u822c\u662f\u8981\u8bbf\u95ee\u7684\u5916\u90e8\u66b4\u9732\u670d\u52a1\u7684\u7aef\u53e3\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\u6216\u8005\u8fde\u63a5\u7b26\u8868\u793a\u8303\u56f4\uff0c\u4f8b\u5982 80,8000-8080\n--force                   \u5f3a\u5236\u8986\u76d6\u5df2\u6709\u7684 tc \u89c4\u5219\uff0c\u8bf7\u52a1\u5fc5\u5728\u660e\u786e\u4e4b\u524d\u7684\u89c4\u5219\u53ef\u8986\u76d6\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\n--ignore-peer-port        \u9488\u5bf9\u6dfb\u52a0 --exclude-port \u53c2\u6570\uff0c\u62a5 ss \u547d\u4ee4\u627e\u4e0d\u5230\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff0c\u5ffd\u7565\u6392\u9664\u7aef\u53e3\n--timeout string          \u8bbe\u5b9a\u8fd0\u884c\u65f6\u957f\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u901a\u7528\u53c2\u6570\n\n\u6848\u4f8b\n# \u8bbf\u95ee\u672c\u673a 8080 \u548c 8081 \u7aef\u53e3\u4e22\u5305\u7387 70%\nblade create network loss --percent 70 --interface eth0 --local-port 8080,8081\n\n# \u672c\u673a\u8bbf\u95ee\u5916\u90e8 14.215.177.39 \u673a\u5668\uff08ping www.baidu.com \u83b7\u53d6\u5230\u7684 IP\uff0980 \u7aef\u53e3\u4e22\u5305\u7387 100%\nblade create network loss --percent 100 --interface eth0 --remote-port 80 --destination-ip 14.215.177.39\n\n# \u53ef\u5728\u672c\u673a\u901a\u8fc7 curl 14.215.177.39 \u547d\u4ee4\u9a8c\u8bc1\uff0c\u4f1a\u53d1\u73b0\u8bbf\u95ee\u4e0d\u901a\u3002\u6267\u884c curl 14.215.177.38 \u662f\u901a\u7684\u3002\n# \u5bf9\u6574\u4e2a\u7f51\u5361 eth0 \u505a 60% \u7684\u4e22\u5305\uff0c\u6392\u9664 22 \u548c 8000\u52308080 \u7aef\u53e3\nblade create network loss --percent 60 --interface eth0 --exclude-port 22,8000-8080\n\n# \u4f1a\u53d1\u73b0 22 \u7aef\u53e3\u548c 8000 \u5230 8080 \u7aef\u53e3\u4e0d\u53d7\u5f71\u54cd\uff0c\u53ef\u5728\u53e6\u4e00\u53f0\u76f8\u540c\u7f51\u7edc\u5185\u7684\u673a\u5668\u901a\u8fc7\u5206\u522b\u6267\u884c\u591a\u6b21 curl xxx.xxx.xxx.xxx:8080 \u548c telnet xxx.xxx.xxx.xxx:8081 \u8fdb\u884c\u6d4b\u8bd5\n\n# \u5b9e\u73b0\u6574\u4e2a\u7f51\u5361\u4e0d\u53ef\u8bbf\u95ee\uff0c\u4e0d\u53ef\u8bbf\u95ee\u65f6\u95f4 20 \u79d2\u3002\u6267\u884c\u5b8c\u6210\u4e0b\u9762\u547d\u4ee4\u540e\uff0c\u5f53\u524d\u7684\u7f51\u7edc\u4f1a\u4e2d\u65ad\u6389\uff0c20 \u79d2\u540e\u6062\u590d\u3002\u5207\u8bb0\uff01\uff01\u52ff\u5fd8 --timeout \u53c2\u6570\nblade create network loss --percent 100 --interface eth0 --timeout 20\n\n\u5b9e\u8df5\nblade create network loss --percent 70 --interface eth0 --local-port 3000 --timeout 60\n\n\u68c0\u67e5\ncurl 127.0.0.1:3000\nping 127.0.0.1:3000\n")),(0,r.kt)("h4",{id:"blade-create-docker"},"blade create docker"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"docker run --name nginx-test -p 80:80 -d nginx:latest\n\n\u67e5\u770b\u5bb9\u5668 id\ndocker ps |grep nginx\n\n\u67e5\u770b\u5bb9\u5668 cpu men \u60c5\u51b5\ndocker ps -q | xargs  docker stats --no-stream\n")),(0,r.kt)("h5",{id:"blade-create-docker-cpu"},"blade create docker cpu"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u4ecb\u7ecd\n\u5bb9\u5668\u5185 CPU \u8d1f\u8f7d\u5b9e\u9a8c\u573a\u666f\uff0c\u540c\u57fa\u7840\u8d44\u6e90\u7684 CPU \u573a\u666f\n\n\u547d\u4ee4\n\u652f\u6301 CPU \u573a\u666f\u547d\u4ee4\u5982\u4e0b\uff1a\nblade create docker cpu load \u5bb9\u5668\u5185 CPU \u8d1f\u8f7d\u573a\u666f\uff0c\u540c [blade create cpu load](blade create cpu load.md)\n\n\u53c2\u6570\n\u9664\u4e86\u4e0a\u8ff0\u57fa\u7840\u573a\u666f\u5404\u81ea\u6240\u9700\u7684\u53c2\u6570\u5916\uff0c\u5728 docker \u73af\u5883\u4e0b\uff0c\u8fd8\u652f\u6301\u7684\u53c2\u6570\u5982\u4e0b\uff1a\n--blade-override           \u662f\u5426\u8986\u76d6\u5bb9\u5668\u5185\u5df2\u6709\u7684 chaosblade \u5de5\u5177\uff0c\u9ed8\u8ba4\u662f false\uff0c\u8868\u793a\u4e0d\u8986\u76d6\uff0cchaosblade \u5728\u5bb9\u5668\u5185\u7684\u90e8\u7f72\u8def\u5f84\u4e3a /opt/chaosblade\n--blade-tar-file string    \u6307\u5b9a\u672c\u5730 chaosblade-VERSION.tar.gz \u5de5\u5177\u5305\u5168\u8def\u5f84\uff0c\u7528\u4e8e\u62f7\u8d1d\u5230\u5bb9\u5668\u5185\u6267\u884c\n--container-id string      \u76ee\u6807\u5bb9\u5668 ID\n--docker-endpoint string   Docker server \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a\u672c\u5730\u7684 /var/run/docker.sock\n\n\u6848\u4f8b\n\u5bf9 container id \u662f 5239e26f6329 \u7684\u505a CPU \u4f7f\u7528\u7387 80% \u7684\u5b9e\u9a8c\u573a\u666f\uff0c\u6267\u884c\u547d\u4ee4\u5982\u4e0b\uff1a\nblade create docker cpu fullload --cpu-percent 80 --blade-tar-file /root/chaosblade-0.4.0.tar.gz --container-id 5239e26f6329 \n\n\u5b9e\u8df5\uff08\u672a\u5b9e\u8df5\u6210\u529f\uff09\nblade create docker cpu fullload --cpu-percent 80 --blade-tar-file /root/chaosblade/chaosblade-1.7.1-linux-amd64.tar.gz container-id 50811970d1f4\n")),(0,r.kt)("h5",{id:"blade-create-docker-network"},"blade create docker network"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u4ecb\u7ecd\n\u5bb9\u5668\u5185\u7f51\u7edc\u5b9e\u9a8c\u573a\u666f\uff0c\u540c\u57fa\u7840\u8d44\u6e90\u7684\u7f51\u7edc\u573a\u666f\n\n\u547d\u4ee4\n\u652f\u6301\u7684\u7f51\u7edc\u573a\u666f\u547d\u4ee4\u5982\u4e0b\uff1a\nblade create docker network delay \u5bb9\u5668\u7f51\u7edc\u5ef6\u8fdf\uff0c\u540c [blade create network delay](blade create network delay.md)\nblade create docker network loss \u5bb9\u5668\u7f51\u7edc\u4e22\u5305\uff0c\u540c [blade create network loss](blade create network loss.md)\nblade create docker network dns \u5bb9\u5668\u5185\u57df\u540d\u8bbf\u95ee\u5f02\u5e38\uff0c\u540c [blade create network dns](blade create network dns.md)\n\n\u53c2\u6570\n\u9664\u4e86\u4e0a\u8ff0\u57fa\u7840\u573a\u666f\u5404\u81ea\u6240\u9700\u7684\u53c2\u6570\u5916\uff0c\u5728 docker \u73af\u5883\u4e0b\uff0c\u8fd8\u652f\u6301\u7684\u53c2\u6570\u5982\u4e0b\uff1a\n--container-id string      \u76ee\u6807\u5bb9\u5668 ID\n--docker-endpoint string   Docker server \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a\u672c\u5730\u7684 /var/run/docker.sock\n--image-repo string        chaosblade-tool \u955c\u50cf\u4ed3\u5e93\u5730\u5740\uff0c\u9ed8\u8ba4\u662f\u4ece `registry.cn-hangzhou.aliyuncs.com/chaosblade`\n\n\u6848\u4f8b\n\u5bf9 nginx \u5bb9\u5668 80 \u7aef\u53e3\u505a\u8bbf\u95ee\u5ef6\u8fdf 3 \u79d2\uff0c\u6267\u884c\u547d\u4ee4\u5982\u4e0b\uff1a\nblade create docker network delay --time 3000 --interface eth0 --local-port 80 --container-id 5239e26f6329\n\n\u5b9e\u8df5\uff08\u672a\u5b9e\u8df5\u6210\u529f\uff09\nblade create docker network delay --time 3000 --interface eth0 --local-port 80 --container-id 50811970d1f4\n")),(0,r.kt)("h4",{id:"blade-create-k8s"},"blade create k8s"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"k8s \u5b9e\u9a8c\u573a\u666f")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/chaosblade-io/chaosblade-operator/tree/master/examples"},"chaosblade-operator yml \u793a\u4f8b")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s node-cpu Node \u8282\u70b9 CPU \u8d1f\u8f7d\u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s node-network Node \u8282\u70b9\u7f51\u7edc\u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s node-process Node \u8282\u70b9\u8fdb\u7a0b\u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s node-disk Node \u8282\u70b9\u78c1\u76d8\u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s pod-pod Pod \u8d44\u6e90\u573a\u666f\uff0c\u6bd4\u5982\u6740 Pod")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s pod-network Pod \u7f51\u7edc\u8d44\u6e90\u573a\u666f\uff0c\u6bd4\u5982\u7f51\u7edc\u5ef6\u8fdf")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s pod-IO Pod IO \u6587\u4ef6\u7cfb\u7edf\u5f02\u5e38\u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s pod-fail Pod \u4e0d\u53ef\u7528\u5f02\u5e38\u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s container-container Container \u8d44\u6e90\u573a\u666f\uff0c\u6bd4\u5982\u6740\u5bb9\u5668")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s container-cpu \u5bb9\u5668\u5185 CPU \u8d1f\u8f7d\u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s container-network \u5bb9\u5668\u5185\u7f51\u7edc\u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"blade create k8s container-process \u5bb9\u5668\u5185\u8fdb\u7a0b\u573a\u666f"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"k8s \u76f8\u5173\u64cd\u4f5c")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u67e5\u770b node \u5360\u6709\u8d44\u6e90\nkubectl top node\n\n\u67e5\u770b pod \u7684\u5bb9\u5668\u540d\u79f0\nkubectl get pod mysql -n my-space -o jsonpath={.spec.containers[*].name}\n\n\u67e5\u770b pod \u5360\u7528\u8d44\u6e90\nkubectl top pod -n kube-system\n\n\u67e5\u770b pod \u6807\u7b7e\nkubectl get pod -A --show-labels\n\n\u67e5\u770b pod cpu\nkubectl top pods -A | sort --reverse --key 3 --numeric\n\n\u67e5\u770b pod memory\nkubectl top pods -A | sort --reverse --key 4 --numeric\n\n\u8e29\u5751\uff1a\n1\u3001node-cpu \u65f6\u5019\u4f7f\u7528--names \u63d0\u793a\u53c2\u6570\u975e\u6cd5\uff08bug\uff0c\u5f85\u5b98\u65b9\u4eba\u5458\u4fee\u590d\uff09\uff0c\u53ef\u7528--labels \u66ff\u4ee3\n\u4e3e\u4f8b\uff1a\nblade create k8s node-cpu load --names k8s-master --cpu-percent 80 --timeout 60 --kubeconfig ~/.kube/config\nblade create k8s node-cpu load --labels kubernetes.io/hostname=k8s-master --cpu-percent 80 --timeout 60 --kubeconfig ~/.kube/config\n2\u3001~/.kube/config \u7684ip \u5730\u5740\u5f97\u6539\u6210\u5185\u7f51\u7684\uff0c\u4e0d\u7136\u4f7f\u7528 k8s \u6545\u969c\u7684\u65f6\u5019\u4f1a\u62a5\u9519\u5730\u5740\u65e0\u6548\uff1b\u6ce8\u610f\u586b\u5199\u6b63\u786e\u7684\u5185\u7f51\u5730\u5740\n")),(0,r.kt)("h5",{id:"blade-create-k8s-node-cpu"},"blade create k8s node-cpu"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Node \u8282\u70b9 CPU \u8d1f\u8f7d\u573a\u666f\n\n\u547d\u4ee4\uff1a\nblade create k8s node-cpu load --names <nodeName> --cpu-percent 80 --timeout 60 --kubeconfig ~/.kube/config\n\u4e3e\u4f8b\uff1a\nblade create k8s node-cpu load --names k8s-master --cpu-percent 80 --timeout 60 --kubeconfig ~/.kube/config\n\u68c0\u67e5\uff1a\nkubectl top node / top\n")),(0,r.kt)("h5",{id:"blade-create-k8s-node-disk"},"blade create k8s node-disk"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Node \u8282\u70b9\u78c1\u76d8\u573a\u666f\n\n\u547d\u4ee4\uff1a\nblade create k8s node-disk fill --names <nodeName> --path /home --percent 80 --timeout 60 --kubeconfig ~/.kube/config\n\u4e3e\u4f8b\uff1a\nblade create k8s node-disk fill --names k8s-master --path /home --percent 80 --timeout 60 --kubeconfig ~/.kube/config\n\u68c0\u67e5\uff1a\ndf -h /home\n")),(0,r.kt)("h5",{id:"blade-create-k8s-node-mem"},"blade create k8s node-mem"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Node \u8282\u70b9\u5185\u5b58\u573a\u666f\n\n\u547d\u4ee4\uff1a\nblade create k8s node-mem load --names <nodeName> --mem-percent 80 --mode=ram --timeout 60 --kubeconfig ~/.kube/config\n\u4e3e\u4f8b\uff1a\nblade create k8s node-mem load --names k8s-master --mem-percent 80 --mode=ram --timeout 60 --kubeconfig ~/.kube/config\n\u68c0\u67e5\uff1a\nkubectl top node / top\n")),(0,r.kt)("h5",{id:"blade-create-k8s-node-network"},"blade create k8s node-network"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"blade create k8s node-network Node \u8282\u70b9\u7f51\u7edc\u573a\u666f\nblade create k8s node-network delay \u8282\u70b9\u7f51\u7edc\u5ef6\u8fdf\u573a\u666f\nblade create k8s node-network loss \u8282\u70b9\u7f51\u7edc\u4e22\u5305\u573a\u666f\nblade create k8s node-network dns \u8282\u70b9\u57df\u540d\u8bbf\u95ee\u5f02\u5e38\u573a\u666f\n\n\u547d\u4ee4\uff1a\nblade create k8s node-network delay --names <nodeName> --interface eth0 --time 3000 --timeout 60 --kubeconfig ~/.kube/config\n\u4e3e\u4f8b\uff1a\nblade create k8s node-network delay --names k8s-master --interface eth0 --time 3000 --timeout 60 --kubeconfig ~/.kube/config\n\u68c0\u67e5\uff1a\uff1f\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"pod \u6545\u969c\u6f14\u7ec3")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"blade create k8s pod-network Pod \u7f51\u7edc\u8d44\u6e90\u573a\u666f\uff0c\u6bd4\u5982\u7f51\u7edc\u5ef6\u8fdf\nblade create k8s pod-network delay Pod \u7f51\u7edc\u5ef6\u8fdf\u573a\u666f\nblade create k8s pod-network loss Pod \u7f51\u7edc\u4e22\u5305\u573a\u666f\nblade create k8s pod-network dns Pod \u57df\u540d\u8bbf\u95ee\u5f02\u5e38\u573a\u666f\n\u547d\u4ee4\uff1a\n\n\u4e3e\u4f8b\uff1a\nblade create k8s pod-network delay --time 3000 --offset 1000 --interface eth0 --local-port 6379 --names redis-slave-674d68586-jnf7f --namespace default --kubeconfig config\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"container \u6545\u969c\u6f14\u7ec3")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"blade create k8s container-cpu \u5bb9\u5668\u5185 CPU \u8d1f\u8f7d\u573a\u666f\n\u547d\u4ee4\uff1a\nblade create k8s container-cpu fullload --names <pod \u540d\u79f0> --namespace <ns \u540d\u79f0> --container-names <\u5bb9\u5668\u540d\u79f0> \\\n--cpu-percent 80 --timeout 60 --kubeconfig ~/.kube/config\n\u4e3e\u4f8b1\uff1a\nblade create k8s container-cpu fullload --names redis --namespace my-space --container-names redis \\\n--cpu-percent 80 --timeout 60 --kubeconfig ~/.kube/config\n\u4e3e\u4f8b2\uff08\u672a\u5b9e\u8df5\u6210\u529f\uff09\uff1a\nkubectl get pod mysql-mysql-master-0 -n my-space -o jsonpath={.spec.containers[*].name}\nblade create k8s container-cpu fullload --names mysql-mysql-master-0 --namespace my-space --container-names mysql \\\n--cpu-percent 80 --timeout 60 --kubeconfig ~/.kube/config\n\u68c0\u67e5\uff1a\nkubectl top pod -A\n\u6839\u636e\u6d88\u8017\u7684 cpu \u6392\u5e8f\nkubectl top pod -A | sort --reverse --key 3 --numeric\n\u6839\u636e\u6d88\u8017\u7684 men \u6392\u5e8f\nkubectl top pod -A | sort --reverse --key 4 --numeric\n")),(0,r.kt)("h2",{id:"4-chaosblade-\u539f\u7406"},"4. ChaosBlade \u539f\u7406"),(0,r.kt)("h3",{id:"41-\u78c1\u76d8-io"},"4.1 \u78c1\u76d8 IO"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"dd"),'\u662f\u4e00\u4e2a\u7528\u4e8e\u6570\u636e\u8f6c\u6362\u548c\u590d\u5236\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5b83\u5728Linux\u548c\u5176\u4ed6\u7c7bUnix\u7cfb\u7edf\u4e2d\u5e7f\u6cdb\u4f7f\u7528\u3002\u5b83\u7684\u540d\u79f0"dd"\u4ee3\u8868"\u6570\u636e\u590d\u5236"\uff08data duplicator\uff09'),(0,r.kt)("p",null,"dd \u547d\u4ee4\u7684\u57fa\u672c\u7528\u6cd5\u548c\u4e00\u4e9b\u5e38\u89c1\u7684\u9009\u9879\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"dd if=input_file of=output_file bs=block_size count=num_blocks [options]\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"if"),"\uff08input file\uff09\uff1a\u6307\u5b9a\u8f93\u5165\u6587\u4ef6\u6216\u6570\u636e\u6e90\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"of"),"\uff08output file\uff09\uff1a\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u6216\u6570\u636e\u76ee\u6807\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"bs"),"\uff08block size\uff09\uff1a\u6307\u5b9a\u6bcf\u6b21\u590d\u5236\u7684\u6570\u636e\u5757\u5927\u5c0f\u3002\u9ed8\u8ba4\u5355\u4f4d\u662f\u5b57\u8282\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"count"),"\uff1a\u6307\u5b9a\u8981\u590d\u5236\u7684\u6570\u636e\u5757\u6570\u91cf\u3002")),(0,r.kt)("p",null,"\u5e38\u89c1\u7684\u9009\u9879\u5305\u62ec\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"iflag"),"\uff1a\u7528\u4e8e\u6307\u5b9a\u8f93\u5165\u9009\u9879")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"direct"),"\uff1a\u6267\u884c\u76f4\u63a5 IO\uff0c\u7ed5\u8fc7\u6587\u4ef6\u7cfb\u7edf\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dsync"),"\uff1a\u5728\u6bcf\u6b21\u8bfb\u53d6\u540e\u8fdb\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"fsync"),"\uff0c\u786e\u4fdd\u6570\u636e\u5199\u5165\u78c1\u76d8\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fullblock"),"\uff1a\u8bfb\u53d6\u64cd\u4f5c\u5c06\u59cb\u7ec8\u8bfb\u53d6\u5b8c\u6574\u7684\u5757\uff0c\u800c\u4e0d\u4f1a\u8bfb\u53d6\u90e8\u5206\u5757\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"nonblock"),"\uff1a\u4f7f\u7528\u975e\u963b\u585e IO\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"noatime"),"\uff1a\u4e0d\u66f4\u65b0\u6587\u4ef6\u7684\u8bbf\u95ee\u65f6\u95f4\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"oflag"),"\uff1a\u7528\u4e8e\u6307\u5b9a\u8f93\u51fa\u9009\u9879")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"direct"),"\uff1a\u6267\u884c\u76f4\u63a5 IO\uff0c\u7ed5\u8fc7\u6587\u4ef6\u7cfb\u7edf\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dsync"),"\uff1a\u5728\u6bcf\u6b21\u5199\u5165\u540e\u8fdb\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"fsync"),"\uff0c\u786e\u4fdd\u6570\u636e\u5199\u5165\u78c1\u76d8\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fullblock"),"\uff1a\u5199\u5165\u64cd\u4f5c\u5c06\u59cb\u7ec8\u5199\u5165\u5b8c\u6574\u7684\u5757\uff0c\u800c\u4e0d\u4f1a\u5199\u5165\u90e8\u5206\u5757\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"nonblock"),"\uff1a\u4f7f\u7528\u975e\u963b\u585e IO\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"nocreat"),"\uff1a\u5982\u679c\u8f93\u51fa\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5219\u4e0d\u521b\u5efa\u8be5\u6587\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"excl"),"\uff1a\u5f53\u521b\u5efa\u8f93\u51fa\u6587\u4ef6\u65f6\uff0c\u5982\u679c\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"status"),"\uff1a\u63a7\u5236\u8fdb\u5ea6\u4fe1\u606f\u7684\u663e\u793a\u9891\u7387\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"seek"),"\uff1a\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u7684\u8d77\u59cb\u504f\u79fb\u91cf\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"skip"),"\uff1a\u8df3\u8fc7\u8f93\u5165\u6587\u4ef6\u7684\u8d77\u59cb\u504f\u79fb\u91cf\u3002"))),(0,r.kt)("p",null,"\u4ee5\u4e0b\u662f\u4e00\u4e9b ",(0,r.kt)("inlineCode",{parentName:"p"},"dd")," \u547d\u4ee4\u7684\u793a\u4f8b\uff1a"),(0,r.kt)("p",null,"\u4ece\u4e00\u4e2a\u6587\u4ef6\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"dd if=input.txt of=output.txt bs=1024\n")),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u7a7a\u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"dd if=/dev/zero of=emptyfile bs=1M count=100\n")),(0,r.kt)("p",null,"\u5c06\u4e00\u4e2a\u786c\u76d8\u5206\u533a\u5907\u4efd\u5230\u4e00\u4e2a\u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"dd if=/dev/sdb1 of=backup.img bs=4M\n")),(0,r.kt)("p",null,"\u4ece\u4e00\u4e2a\u8bbe\u5907\u8bfb\u53d6\u6570\u636e\u5e76\u5199\u5165\u53e6\u4e00\u4e2a\u8bbe\u5907\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"dd if=/dev/sda of=/dev/sdb bs=4096\n")),(0,r.kt)("p",null,"\u751f\u6210\u968f\u673a\u6570\u636e\u5e76\u5199\u5165\u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"dd if=/dev/urandom of=randomdata.bin bs=1M count=10\n")),(0,r.kt)("h2",{id:"5-\u77e5\u8bc6\u788e\u7247"},"5. \u77e5\u8bc6\u788e\u7247"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://wi9wku2j1p.feishu.cn/sheets/H5HEsuWGohJZsKtLTQscMVY4n8c"},"\u9ad8\u53ef\u7528\u6d4b\u8bd5\u7528\u4f8b")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8e29\u5751")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\u6267\u884c\uff1ablade create k8s node-network delay --labels kubernetes.io/hostname=k8s-master --interface eth0 --time 3000 --timeout 60 --kubeconfig ~/.kube/config\n\n\u62a5\u9519\uff1a{"code":54000,"success":false,"error":"`/bin/sh -c tc qdisc add dev eth0 root netem delay 3000ms 0ms`: cmd exec failed, err: RTNETLINK answers: No such file or directory\\n exit status 2","result":{"uid":"71abedb31cae2694","success":false,"error":"`/bin/sh -c tc qdisc add dev eth0 root netem delay 3000ms 0ms`: cmd exec failed, err: RTNETLINK answers: No such file or directory\\n exit status 2","statuses":[{"state":"Error","error":"`/bin/sh -c tc qdisc add dev eth0 root netem delay 3000ms 0ms`: cmd exec failed, err: RTNETLINK answers: No such file or directory\\n exit status 2","success":false,"kind":"node","identifier":"/k8s-master/"}]}}\n\n\u89e3\u51b3\uff1a\nyum -y install iproute-tc\nyum install kernel-modules-extra\n')))}b.isMDXComponent=!0},2656:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/chaosblade-architect-699b518b40fe6e3eeb1e50e156bf9e57.png"},3236:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/chaosblade-scene-2389b1bbbbbb36654a20c9a6bd25d5d6.png"},4272:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/chaosblade-fe2653bcc71cf827cb8c642300034d1f.png"}}]);