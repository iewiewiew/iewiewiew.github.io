"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8561],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>k});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},i=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),d=p(r),i=a,k=d["".concat(s,".").concat(i)]||d[i]||b[i]||o;return r?n.createElement(k,l(l({ref:t},c),{},{components:r})):n.createElement(k,l({ref:t},c))}));function k(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=i;var u={};for(var s in t)hasOwnProperty.call(t,s)&&(u[s]=t[s]);u.originalType=e,u[d]="string"==typeof e?e:a,l[1]=u;for(var p=2;p<o;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}i.displayName="MDXCreateElement"},9797:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>b,frontMatter:()=>o,metadata:()=>u,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const o={},l=void 0,u={unversionedId:"DevOps/Kubernetes/Kubernetes_Other",id:"DevOps/Kubernetes/Kubernetes_Other",title:"Kubernetes_Other",description:"[TOC]",source:"@site/docs/DevOps/Kubernetes/Kubernetes_Other.md",sourceDirName:"DevOps/Kubernetes",slug:"/DevOps/Kubernetes/Kubernetes_Other",permalink:"/docs/DevOps/Kubernetes/Kubernetes_Other",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Kubernetes_Lite",permalink:"/docs/DevOps/Kubernetes/Kubernetes_Lite"},next:{title:"Git",permalink:"/docs/Git/"}},s={},p=[{value:"1.  Kuboard",id:"1--kuboard",level:2},{value:"Kuboard \u7b80\u4ecb",id:"kuboard-\u7b80\u4ecb",level:3},{value:"Kuboard \u642d\u5efa",id:"kuboard-\u642d\u5efa",level:3},{value:"2. Rancher",id:"2-rancher",level:2},{value:"Rancher \u7b80\u4ecb",id:"rancher-\u7b80\u4ecb",level:3},{value:"Rancher \u642d\u5efa",id:"rancher-\u642d\u5efa",level:3},{value:"Docker \u5b89\u88c5",id:"docker-\u5b89\u88c5",level:4},{value:"Helm \u5b89\u88c5\uff08\u5f85\u5b9e\u8df5\uff09",id:"helm-\u5b89\u88c5\u5f85\u5b9e\u8df5",level:4},{value:"3. kubeval yaml \u68c0\u67e5\u5de5\u5177",id:"3-kubeval-yaml-\u68c0\u67e5\u5de5\u5177",level:2}],c={toc:p},d="wrapper";function b(e){let{components:t,...o}=e;return(0,a.kt)(d,(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"[TOC]"),(0,a.kt)("h1",{align:"center"},"Kubernetes_Other"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"By\uff1aweimenghua",(0,a.kt)("br",{parentName:"p"}),"\n","Date\uff1a2022.10.01",(0,a.kt)("br",{parentName:"p"}),"\n","Description\uff1a")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53c2\u8003\u8d44\u6599"),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://www.rancher.cn/"},"Rancher \u5b98\u7f51"),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"http://docs.rancher.cn/"},"Rancher \u6587\u6863"),"  "),(0,a.kt)("h2",{id:"1--kuboard"},"1.  Kuboard"),(0,a.kt)("h3",{id:"kuboard-\u7b80\u4ecb"},"Kuboard \u7b80\u4ecb"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://kuboard.cn/overview/"},"Kuboard \u7b80\u4ecb"),"*\nKuboard\uff0c\u662f\u4e00\u6b3e\u514d\u8d39\u7684 Kubernetes \u56fe\u5f62\u5316\u7ba1\u7406\u5de5\u5177\uff0cKuboard \u529b\u56fe\u5e2e\u52a9\u7528\u6237\u5feb\u901f\u5728 Kubernetes \u4e0a\u843d\u5730\u5fae\u670d\u52a1\u3002\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u7ed3\u5408\u5df2\u6709\u6216\u65b0\u5efa\u7684\u4ee3\u7801\u4ed3\u5e93\u3001\u955c\u50cf\u4ed3\u5e93\u3001CI/CD \u5de5\u5177\u7b49\uff0c\u53ef\u4ee5\u4fbf\u6377\u7684\u642d\u5efa\u4e00\u4e2a\u751f\u4ea7\u53ef\u7528\u7684 Kubernetes \u5bb9\u5668\u4e91\u5e73\u53f0\uff0c\u8f7b\u677e\u7ba1\u7406\u548c\u8fd0\u884c\u4e91\u539f\u751f\u5e94\u7528\u3002\n\u6837\u4f8b\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://demo.kuboard.cn"},"https://demo.kuboard.cn"),(0,a.kt)("br",{parentName:"p"}),"\n","\u7528 \u6237\uff1ademo",(0,a.kt)("br",{parentName:"p"}),"\n","\u5bc6 \u7801\uff1ademo123"),(0,a.kt)("p",null,(0,a.kt)("img",{src:r(9731).Z,width:"3024",height:"1666"})),(0,a.kt)("h3",{id:"kuboard-\u642d\u5efa"},"Kuboard \u642d\u5efa"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://kuboard.cn/install/v3/install-in-k8s.html#%E5%AE%89%E8%A3%85"},"Kuboard \u5b89\u88c5\u6559\u7a0b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"1\u3001\u5b89\u88c5 Kuboard\nkubectl apply -f https://addons.kuboard.cn/kuboard/kuboard-v3.yaml\n\n2\u3001\u8bbf\u95ee Kuboard\n\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u94fe\u63a5 http://127.0.0.1:30080, \u8f93\u5165\u521d\u59cb\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5e76\u767b\u5f55\n\u7528\u6237\u540d\uff1a admin\n\u5bc6\u7801\uff1a Kuboard123\n\n3\u3001\u8e29\u5751\n\u6267\u884c\uff1akubectl get pods -n kuboard\n\u5982\u679c\u7ed3\u679c\u4e2d\u6ca1\u6709\u51fa\u73b0 kuboard-etcd-xxxxx \u7684\u5bb9\u5668, \u5c31\u6267\u884c\uff1akubectl label nodes docker-desktop k8s.kuboard.cn/role=etcd \n\n4\u3001\u521b\u5efa\u96c6\u7fa4\uff0c\u767b\u9646 kuboard \u62ff\u5230\u5982\u4e0b\u547d\u4ee4\ncurl -k 'http://127.0.0.1:30080/kuboard-api/cluster/default/kind/KubernetesCluster/default/resource/installAgentToKubernetes?token=0vPAhlKn6zIcNfvDsUBKX7t64yV4R46d' > kuboard-agent.yaml\n\nkubectl apply -f ./kuboard-agent.yaml\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"2.3.3\u3001Kuboard \u5220\u9664")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'1\u3001\u67e5\u8be2 pod\nkubectl get pods -n kuboard\nkubectl get pods --all-namespaces | grep "kuboard"\n\n2\u3001\u5220\u9664 pod\nkubectl delete pods kuboard-etcd-lmtz8 --ns=kuboard\n\n3\u3001\u67e5\u8be2 service\nkubectl get service -A\n\n4\u3001\u5220\u9664 service\nkubectl delete service kuboard --ns=kube-system\n\n5\u3001\u5378\u8f7d kuboard\nkubectl delete -f https://addons.kuboard.cn/kuboard/kuboard-v3.yaml\n\n6\u3001\u5220\u9664 ns \u4e0b\u6240\u6709\u8d44\u6e90\nkubectl delete ns kuboard --force --grace-period=0\nkubectl get ns kuboard -o json > kuboard.json\uff0c\u5c06 finalizers \u5b57\u6bb5\u53bb\u6389\nkubectl proxy --port=8002\ncurl -k -H "Content-Type: application/json" -X PUT --data-binary @kuboard.json http://127.0.0.1:8002/api/v1/namespaces/kuboard/finalize\n')),(0,a.kt)("h2",{id:"2-rancher"},"2. Rancher"),(0,a.kt)("h3",{id:"rancher-\u7b80\u4ecb"},"Rancher \u7b80\u4ecb"),(0,a.kt)("p",null,"Rancher \u662f\u4e00\u4e2a Kubernetes \u7ba1\u7406\u5de5\u5177\uff0c\u8ba9\u4f60\u80fd\u5728\u4efb\u4f55\u5730\u65b9\u548c\u4efb\u4f55\u63d0\u4f9b\u5546\u4e0a\u90e8\u7f72\u548c\u8fd0\u884c\u96c6\u7fa4\u3002"),(0,a.kt)("h3",{id:"rancher-\u642d\u5efa"},"Rancher \u642d\u5efa"),(0,a.kt)("h4",{id:"docker-\u5b89\u88c5"},"Docker \u5b89\u88c5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'\u8fd0\u884c\u5bb9\u5668\ndocker run --privileged \\\n--name rancher \\\n-d --restart=unless-stopped \\\n-p 8080:80 \\\n-p 8443:443 \\\n-v $HOME/docker/rancher:/var/lib/rancher \\\nrancher/rancher\n\n\u8bbf\u95ee\u5730\u5740\nhttp://127.0.0.1:8080\nhttps://127.0.0.1:8443/dashboard/auth/login\n\n\u67e5\u770b\u5bc6\u7801 \u6ce8\uff1a\u5982\u679c\u65e0\u6cd5\u67e5\u770b\u5bc6\u7801\uff0c\u53ef\u4ee5\u9009\u62e9\u91cd\u7f6e\u5bc6\u7801\ndocker logs  <\u5bb9\u5668 ID>  2>&1 | grep "Bootstrap Password:"\n\n\u91cd\u7f6e\u5bc6\u7801 \u5bc6\u7801\uff1a123456\ndocker exec -it <\u5bb9\u5668 ID> reset-password <password>\n')),(0,a.kt)("h4",{id:"helm-\u5b89\u88c5\u5f85\u5b9e\u8df5"},"Helm \u5b89\u88c5\uff08\u5f85\u5b9e\u8df5\uff09"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"helm repo add rancher-stable https://releases.rancher.com/server-charts/stable\n\nkubectl create namespace cattle-system\n\nhelm install rancher ./rancher-2.7.0.tgz --namespace cattle-system  --set hostname=vms81.liruilongs.github.io --set ingress.tls.source=secret  --set useBundledSystemChart=true\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:r(1653).Z,width:"1506",height:"744"})),(0,a.kt)("h2",{id:"3-kubeval-yaml-\u68c0\u67e5\u5de5\u5177"},"3. kubeval yaml \u68c0\u67e5\u5de5\u5177"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53c2\u8003\u8d44\u6599"),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://kubeval.instrumenta.dev/"},"kubeval")),(0,a.kt)("p",null,"\u5b89\u88c5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"wget https://github.com/instrumenta/kubeval/releases/latest/download/kubeval-linux-amd64.tar.gz\ntar xf kubeval-linux-amd64.tar.gz\nsudo cp kubeval /usr/local/bin\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"docker run -it -v `pwd`/fixtures:/fixtures garethr/kubeval fixtures/*\n\nfixtures/* \u4e3a yaml \u6587\u4ef6\u8def\u5f84\n")))}b.isMDXComponent=!0},9731:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/Kuboard-8e62a2fc8ee416513b50c9e1c7b6f7a5.png"},1653:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/Rancher-42fcb8b3d202625d0d4ed560603597aa.png"}}]);