<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Jenkins/Jenkins">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Jenkins | 知行合一</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://iewiewiew.github.io/img/me.jpeg"><meta data-rh="true" name="twitter:image" content="https://iewiewiew.github.io/img/me.jpeg"><meta data-rh="true" property="og:url" content="https://iewiewiew.github.io/docs/Jenkins/"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Jenkins | 知行合一"><meta data-rh="true" name="description" content="[TOC]"><meta data-rh="true" property="og:description" content="[TOC]"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://iewiewiew.github.io/docs/Jenkins/"><link data-rh="true" rel="alternate" href="https://iewiewiew.github.io/docs/Jenkins/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://iewiewiew.github.io/docs/Jenkins/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.183e182e.css">
<link rel="preload" href="/assets/js/runtime~main.5e310ca4.js" as="script">
<link rel="preload" href="/assets/js/main.cb284e89.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/me.jpeg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/me.jpeg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">wei</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">目录</a><a href="https://www.processon.com/mindmap/6138112f1e085306ef9fe608" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">技能图谱<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/iewiewiew" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">README</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/AI/">AI</a><button aria-label="打开/收起侧边栏菜单「AI」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Ansible/">Ansible</a><button aria-label="打开/收起侧边栏菜单「Ansible」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/CSBasic/Network">CSBasic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Chaos/ChaosBlade">Chaos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Database/ClickHouse/">Database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/DevOps/">DevOps</a><button aria-label="打开/收起侧边栏菜单「DevOps」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Docker/">Docker</a><button aria-label="打开/收起侧边栏菜单「Docker」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Git/">Git</a><button aria-label="打开/收起侧边栏菜单「Git」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/JMeter/">JMeter</a><button aria-label="打开/收起侧边栏菜单「JMeter」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" href="/docs/Jenkins/">Jenkins</a><button aria-label="打开/收起侧边栏菜单「Jenkins」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jenkins/Pipeline/">Pipeline</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Kubernetes/">Kubernetes</a><button aria-label="打开/收起侧边栏菜单「Kubernetes」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Linux/">Linux</a><button aria-label="打开/收起侧边栏菜单「Linux」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Middleware/Apollo/">Middleware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Mixinfo/BigData/大数据">Mixinfo</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/SoftwareTest/AppTest">SoftwareTest</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Jenkins</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Jenkins</h1></header><p>[TOC]</p><hr><h1 align="center">Jenkins</h1><blockquote><p>By：weimenghua<br>
<!-- -->Date：2022.11.11<br>
<!-- -->Description：Jenkins 持续集成工具</p></blockquote><p><strong>参考资料</strong><br>
<a href="https://www.jenkins.io/" target="_blank" rel="noopener noreferrer">Jenkins 官网</a><br>
<a href="https://www.processon.com/mindmap/6479bee1e840aa69e0ec8790" target="_blank" rel="noopener noreferrer">Jenkins 图谱</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-jenkins-介绍">1. Jenkins 介绍<a href="#1-jenkins-介绍" class="hash-link" aria-label="1. Jenkins 介绍的直接链接" title="1. Jenkins 介绍的直接链接">​</a></h2><p>Jenkins 是一个流行的开源自动化服务器，可用于自动构建、测试和部署软件。它支持许多不同的插件和集成，可以与其他工具和平台集成，例如 Git、Docker、Kubernetes 和 AWS 等。Jenkins 具有广泛的应用场景，并且被广泛用于 DevOps 实践中。</p><p><strong>Jenkins 原理</strong></p><p>1、构建前（也可以理解为构建时），jenkins 为每个 job 创建单独工作空间目录，每次构建通过 git 将代码拉取当前工作空间目录（workspace）。<br>
<!-- -->2、构建时，jenkins 执行 build 脚本，脚本一般拉取代码，前端打包，后端打包，将打包后的文件发送到目标机器，重启应用。<br>
<!-- -->3、构建后，发送邮件给触发者或者生成测试报告。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-jenkins-搭建">2. Jenkins 搭建<a href="#2-jenkins-搭建" class="hash-link" aria-label="2. Jenkins 搭建的直接链接" title="2. Jenkins 搭建的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-安装">Docker 安装<a href="#docker-安装" class="hash-link" aria-label="Docker 安装的直接链接" title="Docker 安装的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">下载脚本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/iewiewiew/wei-notebook/master/Docker/script/install_software.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">执行脚本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod u+x 777 install_software.sh &amp;&amp; sh install_software.sh jenkins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>获取初始化密码</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">进入容器查看初始化密码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it jenkins bash -c &#x27;cat /var/jenkins_home/secrets/initialAdminPassword&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如做目录挂载，直接在宿主机执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /var/jenkins_home/secrets/initialAdminPassword</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/assets/images/jenkins_login-224e2a225de5713712287cb44b1bd285.png" width="1511" height="748" class="img_ev3q"></p><p>可以选择【安装推荐的插件】，后续需要添加插件话可在【插件管理】进行添加</p><p>![](./img/自定义 Jenkins.png)</p><p>安装插件 ing</p><p><img loading="lazy" src="/assets/images/新手入门-a4c7dfd91bef1ef225d3c48ee345bac2.png" width="1511" height="747" class="img_ev3q"></p><p>创建第一个管理员用户，这里账号密码设置为 admin/admin</p><p><img loading="lazy" src="/assets/images/创建第一个管理员用户-3604176a63e63b524476b9385312bb5f.png" width="1511" height="749" class="img_ev3q"></p><p>默认使用实例配置</p><p><img loading="lazy" src="/assets/images/实例配置-9b7fbcdd7408e05c1f793f58d7fb2392.png" width="1511" height="748" class="img_ev3q"></p><p>进入  Jenkins 工作台</p><p><img loading="lazy" src="/assets/images/jenkins_dashboard-5b535b936ae32f6df118a68556faf6ea.png" width="1511" height="748" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-war-包安装">Linux war 包安装<a href="#linux-war-包安装" class="hash-link" aria-label="Linux war 包安装的直接链接" title="Linux war 包安装的直接链接">​</a></h3><p><a href="http://updates.jenkins-ci.org/download/war/" target="_blank" rel="noopener noreferrer">Jenkins war 包下载地址</a><br>
<a href="https://www.jenkins.io/download/thank-you-downloading-windows-installer-stable" target="_blank" rel="noopener noreferrer">Jenkins msi 包下载地址</a>  </p><p><strong>启动 Jenkins</strong>
<code>nohup java -Xmx3072m -Xms3072m -Xmn768m -XX:PermSize=128m -XX:MaxPermSize=256M -Xss512k -jar jenkins.war &amp;</code></p><p><strong>JVM 参数含义如下</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-Xms: 使用的最小堆内存大小</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Xmx: 使用的最大堆内存大小</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-XX:PermSize: 内存的永久保存区域大小</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-XX:MaxPermSize: 最大内存的永久保存区域大小</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>验证 Jenkins</strong>
访问地址：<a href="http://127.0.0.1:8080/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8080/</a>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="windows-war-包安装">Windows war 包安装<a href="#windows-war-包安装" class="hash-link" aria-label="Windows war 包安装的直接链接" title="Windows war 包安装的直接链接">​</a></h3><p><strong>启动 Jenkins</strong>
<code>java -jar jenkins.war</code>
注：如果 Jenkins 给提示的路径不对，可用 everything 直接搜索 initialAdminPassword
路径1：C:\Windows\SysWOW64\config\systemprofile\AppData\Local\Jenkins<!-- -->.<!-- -->jenkins\secrets\initialAdminPassword
路径2：C:\Users\user<!-- -->.<!-- -->jenkins\secrets\initialAdminPassword</p><p><strong>验证 Jenkins</strong>
访问地址：<a href="http://127.0.0.1:8080/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8080/</a>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-服务常用操作">Jenkins 服务常用操作<a href="#jenkins-服务常用操作" class="hash-link" aria-label="Jenkins 服务常用操作的直接链接" title="Jenkins 服务常用操作的直接链接">​</a></h3><p><strong>windows</strong></p><ul><li>停止服务：<code>jenkins.exe stop</code></li><li>启动服务：<code>jenkins.exe start</code></li><li>重启服务：<code>jenkins.exe restart</code></li></ul><p><strong>windows 和 Linux</strong></p><ul><li>关闭 jenkins 服务：<code>http://localhost:8080/exit</code></li><li>重新启动 jenkins 服务器：<code>http://localhost:8080/restart</code></li><li>重新加载配置信息：<code>http://localhost:8080/reload</code></li></ul><p><strong>curl 调用 Jenkins 接口</strong><br>
<!-- -->格式：<code>curl -X POST http://{JekinsUrl} --user username:APItoken</code><br>
<!-- -->例子：<code>curl -X POST http://localhost:8080 --user admin:1167fe0098226d9f8fc89e74b235d4bf65</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-jenkins-教程">3. Jenkins 教程<a href="#3-jenkins-教程" class="hash-link" aria-label="3. Jenkins 教程的直接链接" title="3. Jenkins 教程的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建-job-的完整流程">创建 job 的完整流程<a href="#创建-job-的完整流程" class="hash-link" aria-label="创建 job 的完整流程的直接链接" title="创建 job 的完整流程的直接链接">​</a></h3><p>点击【新建 Item】&gt; 输入一个任务名称，如：job-demo &gt; 选择【流水线】&gt; 点击【确定】</p><p>![](./img/创建 job.png)</p><p>进入 job 配置页面，选择【Pipeline script】，选择【try sample Pipeline】，点击【保存】</p><p><img loading="lazy" src="/assets/images/pipeline_job_demo-0d64aa4bbe033383d8cd5cd501b9bd68.png" width="1511" height="748" class="img_ev3q"></p><p>创建 job 后点击【立即构建】即可运行 job</p><p>![](./img/运行 job.png)</p><p>点击日志 ID，如：#1，进入控制台查看日志</p><p>![](./img/查看 job 日志.png)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-凭据管理">Jenkins 凭据管理<a href="#jenkins-凭据管理" class="hash-link" aria-label="Jenkins 凭据管理的直接链接" title="Jenkins 凭据管理的直接链接">​</a></h3><p>从工作台进入系统管理 &gt; 凭据 &gt; 系统 &gt; 全局凭据，可以查看 Jenkins 凭据类型有：</p><ol><li>用户名和密码（Username with password）：最基本的凭据类型，包含用户名和密码。</li><li>GitHub 凭据（GitHub App）：用于访问 GitHub 应用程序的凭据类型。</li><li>SSH 用户名和私钥（SSH Username with private key）：用于 SSH 访问的凭据类型，包含用户名和私钥。</li><li>密钥对（Secret file）：包含机密信息或密码等敏感数据的文件。</li><li>令牌（Secret text）：包含单个机密字符串的凭据类型。</li><li>证书（Certificate）：用于在 Jenkins 中与其他系统或服务进行安全通信。它通常包含一个公钥和一个私钥，用于加密和解密数据。。</li></ol><p><img loading="lazy" src="/assets/images/新增凭据-74128abbaa9918d83a20753a2f9c0b5d.png" width="1511" height="749" class="img_ev3q"></p><p>新建一个 SSH Username with private key 凭据</p><p><img loading="lazy" src="/assets/images/新建凭据-7fe91c33e2ed6b1a0a9170ec99be9ec8.png" width="1511" height="749" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-用户管理">Jenkins 用户管理<a href="#jenkins-用户管理" class="hash-link" aria-label="Jenkins 用户管理的直接链接" title="Jenkins 用户管理的直接链接">​</a></h3><p><img loading="lazy" src="/assets/images/用户列表-2a428f0b7d70871787e2d1094487f22f.png" width="1511" height="748" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-权限控制">Jenkins 权限控制<a href="#jenkins-权限控制" class="hash-link" aria-label="Jenkins 权限控制的直接链接" title="Jenkins 权限控制的直接链接">​</a></h3><p>1、Jenkins 权限<br>
<!-- -->以 dev_base 开头：dev_base.*  </p><p>2、Jenkins 视图过滤<br>
<!-- -->以 common 开头且不包含 pro：^common((?!pro).)<em><br>以 dev_common 开头：^(dev_common).</em><br>
<!-- -->以 sonar_fb 或者 sonar_jly 开头：^(sonar_fb|sonar_jly).*  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-系统配置">Jenkins 系统配置<a href="#jenkins-系统配置" class="hash-link" aria-label="Jenkins 系统配置的直接链接" title="Jenkins 系统配置的直接链接">​</a></h3><p> <strong>Jenkins 配置文件</strong></p><p>默认配置文件路径：/var/jenkins_home/config.xml
job 配置文件路径：/var/jenkins_home/jobs/*/config.xml
修改该文件后需重启 jenkins 才能生效</p><p><strong>更改 Jenkins 工作目录</strong></p><p>停止 Jenkins 服务：注：restart 重启无效的话，kill -9 结束进程再启动</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vim /etc/profile，添加：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JENKINS_HOME=/data/.jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /etc &amp;&amp; source profile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>查看配置变更：Jenkins &gt; 系统设置：主目录 已变更为新的目录</p><p>将原有工作空相关内容拷贝到新的工作空间</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="邮件通知">邮件通知<a href="#邮件通知" class="hash-link" aria-label="邮件通知的直接链接" title="邮件通知的直接链接">​</a></h4><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-插件管理">Jenkins 插件管理<a href="#jenkins-插件管理" class="hash-link" aria-label="Jenkins 插件管理的直接链接" title="Jenkins 插件管理的直接链接">​</a></h3><p>从工作台进入系统管理 &gt; 插件管理，在 Avaliable plugins 搜索插件并进行安装，安装完成后需重启 Jenkins 才会生效。</p><p><img loading="lazy" src="/assets/images/插件管理-01b662d8cc7d2d0e23216c5e220f2fde.png" width="1511" height="748" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="publish-over-ssh"><strong>Publish Over SSH</strong><a href="#publish-over-ssh" class="hash-link" aria-label="publish-over-ssh的直接链接" title="publish-over-ssh的直接链接">​</a></h4><p>从工作台进入系统管理 &gt; 系统，找到 Publish Over SSH，填写密码/公钥、名称、主机 IP、用户名、远程机器可访问的目录，点击【Test Configuration】进行测试，返回 success 表示连接成功，点击【保存】</p><p><img loading="lazy" src="/assets/images/Publish Over SSH-2814de682f722b6baba70329663f8677.png" width="1511" height="748" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="maven-integration"><strong>Maven Integration</strong><a href="#maven-integration" class="hash-link" aria-label="maven-integration的直接链接" title="maven-integration的直接链接">​</a></h4><p><img loading="lazy" src="/assets/images/新建 maven 项目-3dc9aee0a041183f5d4638ae902a840c.png" width="1511" height="748" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="blue-ocean"><strong>Blue Ocean</strong><a href="#blue-ocean" class="hash-link" aria-label="blue-ocean的直接链接" title="blue-ocean的直接链接">​</a></h4><p><a href="https://www.jenkins.io/zh/doc/book/blueocean/" target="_blank" rel="noopener noreferrer">Blue Ocean 帮助文档</a></p><p>进入工作台，展示 Blue Ocean 的入口</p><p><img loading="lazy" src="/assets/images/打开 Blue Ocean-94ea24f7da0a9a78cbe090f85d80f5f0.png" width="1511" height="748" class="img_ev3q"></p><p>进入 Blue Ocean 页面</p><p><img loading="lazy" src="/assets/images/Blue Ocean-e245e77323baf97103c25260ec4db4d1.png" width="1511" height="747" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-集成-sonar">Jenkins 集成 Sonar<a href="#jenkins-集成-sonar" class="hash-link" aria-label="Jenkins 集成 Sonar的直接链接" title="Jenkins 集成 Sonar的直接链接">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-集成-pytest--allure">Jenkins 集成 Pytest + Allure<a href="#jenkins-集成-pytest--allure" class="hash-link" aria-label="Jenkins 集成 Pytest + Allure的直接链接" title="Jenkins 集成 Pytest + Allure的直接链接">​</a></h3><p>1、安装 Allure 插件</p><p>2、从工作台进入系统管理 &gt; 全局工具配置，可选择手动安装或者自动安装，此处使用自动安装。</p><p><img loading="lazy" src="/assets/images/安装 Allure-fa3b117a9e044ece446b1507ce97a1b4.png" width="1512" height="749" class="img_ev3q"></p><p>3、</p><p>4、进入 job 的配置页，在【构建后操作】选择 Allure Report</p><p><img loading="lazy" src="/assets/images/Allure Report-a6fa9f55cb9029e9b6558445a373d473.png" width="1512" height="749" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-集成-jmeter--ant">Jenkins 集成 JMeter + Ant<a href="#jenkins-集成-jmeter--ant" class="hash-link" aria-label="Jenkins 集成 JMeter + Ant的直接链接" title="Jenkins 集成 JMeter + Ant的直接链接">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-jenkins-示例">4. Jenkins 示例<a href="#4-jenkins-示例" class="hash-link" aria-label="4. Jenkins 示例的直接链接" title="4. Jenkins 示例的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="java-maven-项目构建">Java Maven 项目构建<a href="#java-maven-项目构建" class="hash-link" aria-label="Java Maven 项目构建的直接链接" title="Java Maven 项目构建的直接链接">​</a></h3><p>1、新建 Maven 项目</p><p><img loading="lazy" src="/assets/images/新建 maven 项目-3dc9aee0a041183f5d4638ae902a840c.png" width="1511" height="748" class="img_ev3q"></p><p>2、源码管理</p><p>配置源码，填写仓库地址 <a href="https://github.com/jenkins-docs/simple-java-maven-app" target="_blank" rel="noopener noreferrer">simple-java-maven-app</a>，如果访问 github 失败可切换 gitee，使用 <a href="https://gitee.com/gitee-go/spring-boot" target="_blank" rel="noopener noreferrer">spring-boot</a> 如果是私有仓库需要配置凭证，此处是开源仓库，无需配置凭证。</p><p><img loading="lazy" src="/assets/images/配置源码-58aca206eea63dc9f4985b85869ede20.png" width="1511" height="749" class="img_ev3q"></p><p>3、配置 Maven</p><p>进入系统管理 &gt; 全局工作配置，安装 Maven</p><p><img loading="lazy" src="/assets/images/maven 安装-f5e4fd4acaf23f288f17554e69dd9ef4.png" width="1511" height="746" class="img_ev3q"></p><p>配置 pom.xml</p><p><img loading="lazy" src="/assets/images/maven build-65c96550d562160c190b6c567fbf9025.png" width="1511" height="748" class="img_ev3q"></p><p>4、构建后操作</p><p>增减构建后操作步骤，选择 Send build artifacts over SSH，选择 服务器名称<br>
<!-- -->踩坑：在 job 添加 Send build artifacts over SSH，注意 Remote directory（远程主机目录，绝对路径？） 的作用，填写了会报错无权限（原因未知，当前用户是有该目录权限的）</p><p><img loading="lazy" src="/assets/images/构建后操作-c684847a16dda3300cc6c4223563969f.png" width="1511" height="749" class="img_ev3q"></p><p>5、查看控制台输出</p><p><img loading="lazy" src="/assets/images/控制台输出-4a13df76e9ce710bb356bbb23a1fcf4a.png" width="1511" height="747" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-jenkins-api">5. Jenkins API<a href="#5-jenkins-api" class="hash-link" aria-label="5. Jenkins API的直接链接" title="5. Jenkins API的直接链接">​</a></h2><p>查看 api</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">格式：http://&lt;Jenkins-Server-Address&gt;/api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">举例：http://127.0.0.1:5555/api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">获取 job 信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">格式：http://&lt;Jenkins-Server-Address&gt;/job/&lt;Job-Name&gt;/api/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">举例：http://127.0.0.1:5555/job/test-demo/api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查看 Jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">格式：curl -X POST http://&lt;Jenkins-Server-Address&gt; --user &lt;username&gt;:&lt;token&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">举例：curl -X POST http://127.0.0.1:5555 --user admin:119d5182970d1ea6610d3590a07d131b39</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查看 Job 列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">格式：curl -u &lt;用户名&gt;:&lt;密码&gt; -g &quot;http://127.0.0.1:5555/api/json?pretty=true&amp;tree=jobs[name]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">举例：curl -u admin:admin -g &quot;http://127.0.0.1:5555/api/json?pretty=true&amp;tree=jobs[name]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">获取 Crumb Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式一：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://127.0.0.1:5555/crumbIssuer/api/xml?tree=crumb#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式二：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -u admin:admin &quot;http://127.0.0.1:5555/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,%22:%22,//crumb)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式三：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -u admin:119d5182970d1ea6610d3590a07d131b39 &quot;http://127.0.0.1:5555/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,%22:%22,//crumb)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">启动不带参数的 job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crumb=$(curl -u admin:119d5182970d1ea6610d3590a07d131b39 &quot;http://127.0.0.1:5555/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,%22:%22,//crumb)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -H ${crumb} http://127.0.0.1:5555/job/test-demo/build --user admin:119d5182970d1ea6610d3590a07d131b39</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -H ${crumb} -u admin:admin -X POST &quot;http://127.0.0.1:5555/job/test-demo/build&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">启动带参数的 job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X post http://127.0.0.1:5555/job/test-demo-param2/buildWithParameters?token=119d5182970d1ea6610d3590a07d131b39</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-知识碎片">6. 知识碎片<a href="#6-知识碎片" class="hash-link" aria-label="6. 知识碎片的直接链接" title="6. 知识碎片的直接链接">​</a></h2><p><strong>IDEA 集成 Jenkins</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. IDEA 安装 Jenkins Control 插件：File &gt; Settings &gt; Plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. IDEA 设置 Jenkins 服务器信息：File &gt; Settings &gt; Tools &gt; Jenkins Plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Server Address：ip+端口：http://localhost:8080 或者 域名：https://jenkins.xxx.com。注：使用 ip+端口还是域名取决于 Manage Jenkins &gt; Configuration System  &gt; Jenkins Location 的设置，一定要和 Jenkins URL 的设置保持一致。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Username：admin。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Password：在 Jenkins &gt; 用户名 &gt; 设置 &gt; 获取 API Token。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Crumb Data：访问 http://localhost:8080/crumbIssuer/api/xml?tree=crumb# 获取 Crumb Data。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/assets/images/IDEA+Jenkins-909398a8b683febde680ccd11320e4f5.png" width="1559" height="1011" class="img_ev3q"></p><p><strong>Docker 容器中高版本 Jenkins 关闭跨站请求伪造保护</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">方式一：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">关闭 系统管理-&gt;全局安全配置-&gt;跨站请求伪造保护 选项（注：高版本无）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">设置 系统管理-&gt;系统设置-&gt;Jenkins Location 的 URL 和 Jenkins 访问地址保持一致</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式二：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">进入 系统管理 &gt; 脚本控制台，执行：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">新版 Jenkins 关闭 CSRF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">新版 Jenkins 打开 CSRF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式三：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1、将 jenkins.sh 复制到宿主机</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker cp jenkins:/usr/local/bin/jenkins.sh /tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2、修改 jenkins.sh，在 exec java -Duser.home=&quot;$JENKINS_HOME&quot; 加上：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Dhudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">结果：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec java -Duser.home=&quot;$JENKINS_HOME&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;-Dhudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION=true </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">${java_opts_array[@]}&quot; -jar ${JENKINS_WAR} &quot;${jenkins_opts_array[@]}&quot; &quot;$@&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3、将 jenkins.sh 复制到容器中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker cp /tmp/jenkins.sh jenkins:/usr/local/bin/jenkins.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4、重启 jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker restart jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5、检查</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it jenkins bash -c &#x27;cat /usr/local/bin/jenkins.sh&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Jenkins 构建时间和服务器时间不一致</strong></p><p>访问 http://your-jenkins/systemInfo，查看 user.timezone 变量的值</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">方式一：（临时修改）进入 系统管理 &gt; 脚本命令行，执行：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System.setProperty(&#x27;org.apache.commons.jelly.tags.fmt.timeZone&#x27;,&#x27;Asia/Shanghai&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式二：在日程表添加如下配置，但是还是不准确</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TZ=Asia/Shanghai</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">H 1 * * 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式三：使用 Docker 启动 Jenkins 加上以下参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-e JAVA_OPTS=-Duser.timezone=Asia/Shanghai</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式四：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 Jenkins 的主界面中，点击左侧菜单栏中的 &quot;Manage Jenkins&quot; 选项。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 &quot;Manage Jenkins&quot; 页面中，选择 &quot;Configure System&quot; 选项。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 &quot;Configure System&quot; 页面中，向下滚动并找到 &quot;Global properties&quot; 部分。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 &quot;Global properties&quot; 部分中，勾选 &quot;Environment variables&quot; 选项，并点击 &quot;Add&quot; 按钮。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 &quot;Add Environment Variable&quot; 对话框中，将 &quot;Name&quot; 字段设置为 &quot;TZ&quot;，将 &quot;Value&quot; 字段设置为您所需要的时区，例如 &quot;Asia/Shanghai&quot;。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">点击 &quot;Save&quot; 按钮保存更改，并重新启动 Jenkins 服务以使更改生效。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Jenkins SSH 超时，在高级设置超时时间</p><p>构建后操作 SSH 打印出脚本日志<br>
<!-- -->在 SSH Publishers 高级勾选 Verbose output in console </p><p>定时构建</p><p>设置 cron 表达式，例如：H 6 * * 5 (每周五早上 6 点)</p><p><img loading="lazy" src="/assets/images/构建触发器-bc1e91ffcd2de8cfd231367773c0218d.png" width="1013" height="485" class="img_ev3q"></p><p>强制覆盖 Git 源码：在源码管理 &gt; Additional Behaviours &gt; 勾选 Clean before checkout</p><p><img loading="lazy" src="/assets/images/jenkins_git-f7b3fe2dfec6cb5d6de8ef34f5cd8592.png" width="729" height="347" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/JMeter/jmeter-set/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">README</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Jenkins/Pipeline/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Pipeline</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-jenkins-介绍" class="table-of-contents__link toc-highlight">1. Jenkins 介绍</a></li><li><a href="#2-jenkins-搭建" class="table-of-contents__link toc-highlight">2. Jenkins 搭建</a><ul><li><a href="#docker-安装" class="table-of-contents__link toc-highlight">Docker 安装</a></li><li><a href="#linux-war-包安装" class="table-of-contents__link toc-highlight">Linux war 包安装</a></li><li><a href="#windows-war-包安装" class="table-of-contents__link toc-highlight">Windows war 包安装</a></li><li><a href="#jenkins-服务常用操作" class="table-of-contents__link toc-highlight">Jenkins 服务常用操作</a></li></ul></li><li><a href="#3-jenkins-教程" class="table-of-contents__link toc-highlight">3. Jenkins 教程</a><ul><li><a href="#创建-job-的完整流程" class="table-of-contents__link toc-highlight">创建 job 的完整流程</a></li><li><a href="#jenkins-凭据管理" class="table-of-contents__link toc-highlight">Jenkins 凭据管理</a></li><li><a href="#jenkins-用户管理" class="table-of-contents__link toc-highlight">Jenkins 用户管理</a></li><li><a href="#jenkins-权限控制" class="table-of-contents__link toc-highlight">Jenkins 权限控制</a></li><li><a href="#jenkins-系统配置" class="table-of-contents__link toc-highlight">Jenkins 系统配置</a></li><li><a href="#jenkins-插件管理" class="table-of-contents__link toc-highlight">Jenkins 插件管理</a></li><li><a href="#jenkins-集成-sonar" class="table-of-contents__link toc-highlight">Jenkins 集成 Sonar</a></li><li><a href="#jenkins-集成-pytest--allure" class="table-of-contents__link toc-highlight">Jenkins 集成 Pytest + Allure</a></li><li><a href="#jenkins-集成-jmeter--ant" class="table-of-contents__link toc-highlight">Jenkins 集成 JMeter + Ant</a></li></ul></li><li><a href="#4-jenkins-示例" class="table-of-contents__link toc-highlight">4. Jenkins 示例</a><ul><li><a href="#java-maven-项目构建" class="table-of-contents__link toc-highlight">Java Maven 项目构建</a></li></ul></li><li><a href="#5-jenkins-api" class="table-of-contents__link toc-highlight">5. Jenkins API</a></li><li><a href="#6-知识碎片" class="table-of-contents__link toc-highlight">6. 知识碎片</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5e310ca4.js"></script>
<script src="/assets/js/main.cb284e89.js"></script>
</body>
</html>