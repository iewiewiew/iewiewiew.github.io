<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Linux/Linux">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Linux | 知行合一</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://iewiewiew.github.io/img/me.jpeg"><meta data-rh="true" name="twitter:image" content="https://iewiewiew.github.io/img/me.jpeg"><meta data-rh="true" property="og:url" content="https://iewiewiew.github.io/docs/Linux/"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Linux | 知行合一"><meta data-rh="true" name="description" content="[TOC]"><meta data-rh="true" property="og:description" content="[TOC]"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://iewiewiew.github.io/docs/Linux/"><link data-rh="true" rel="alternate" href="https://iewiewiew.github.io/docs/Linux/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://iewiewiew.github.io/docs/Linux/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZNU4NQPM1V-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="知行合一" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.0ebb5d40.css">
<link rel="preload" href="/assets/js/runtime~main.cbea1bda.js" as="script">
<link rel="preload" href="/assets/js/main.904b21c1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/me.jpeg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/me.jpeg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">wei</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">目录</a><a href="https://www.processon.com/mindmap/6138112f1e085306ef9fe608" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">技能图谱<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/iewiewiew" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">README</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/AI/">AI</a><button aria-label="打开/收起侧边栏菜单「AI」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/CSBasic/Network">CSBasic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Chaos/ChaosBlade">Chaos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Database/ClickHouse/">Database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/DevOps/">DevOps</a><button aria-label="打开/收起侧边栏菜单「DevOps」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Git/">Git</a><button aria-label="打开/收起侧边栏菜单「Git」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" href="/docs/Linux/">Linux</a><button aria-label="打开/收起侧边栏菜单「Linux」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Linux/LinuxCommand">LinuxCommand</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Linux/LinuxCommandCatalog">LinuxCommandCatalog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Linux/Shell">Shell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Linux/查看日志">查看日志</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Linux/知识碎片">知识碎片</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Middleware/Apollo/">Middleware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Mixinfo/BigData/大数据">Mixinfo</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/SoftwareTest/AppTest">SoftwareTest</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Linux</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Linux</h1></header><p>[TOC]</p><h1 align="center">Linux</h1><blockquote><p>By：weimenghua<br>
<!-- -->Date：2022.05.14<br>
<!-- -->Description：Linux 操作系统</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="环境变量">环境变量<a href="#环境变量" class="hash-link" aria-label="环境变量的直接链接" title="环境变量的直接链接">​</a></h3><p>基本提示符，对于 root 用户是#，对于普通用户是$</p><ol><li>使用 echo 命令查看单个环境变量。例如：echo $PATH</li><li>使用 env 查看所有环境变量。例如：env</li><li>使用 set 查看所有本地定义的环境变量。</li></ol><p>常用的环境变量：</p><ol><li>PATH      决定了 shell 将到哪些目录中寻找命令或程序</li><li>HOME      当前用户主目录</li><li>USER      当前用户</li><li>HISTSIZE　历史记录数</li><li>LOGNAME   当前用户的登录名</li><li>HOSTNAME　指主机的名称</li><li>SHELL    当前用户 Shell 类型</li><li>LANGUGE  语言相关的环境变量，多语言可以修改此环境变量</li><li>MAIL　    当前用户的邮件存放目录</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-下获取当前的目录">Linux 下获取当前的目录<a href="#linux-下获取当前的目录" class="hash-link" aria-label="Linux 下获取当前的目录的直接链接" title="Linux 下获取当前的目录的直接链接">​</a></h3><p>Linux 下获取当前的目录：$(cd <code>dirname $0</code>;pwd)<br>
<!-- -->dirname $0，取得当前执行的脚本文件的父目录<br>
<!-- -->cd <code>dirname $0</code>，进入这个目录(切换当前工作目录)<br>
<!-- -->pwd，显示当前工作目录(cd 执行后的)<br>
<!-- -->在使用的过程中需注意此事项：命令中“`”不是英文的单引号，而是英文输入法下的“~”同一个按键下面的那个符号。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-设置开机自启">Linux 设置开机自启<a href="#linux-设置开机自启" class="hash-link" aria-label="Linux 设置开机自启的直接链接" title="Linux 设置开机自启的直接链接">​</a></h3><p>/etc/rc.local 映射文件是/etc/rc.d/rc.local。(前提：chmod +x /etc/rc.d/rc.local)<br>
<!-- -->在/etc/rc.local 或者/etc/rc.d/rc.local 添加执行脚本语句, 举例：sh /tmp/demo.sh。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-查看防火墙状态">Linux 查看防火墙状态<a href="#linux-查看防火墙状态" class="hash-link" aria-label="Linux 查看防火墙状态的直接链接" title="Linux 查看防火墙状态的直接链接">​</a></h3><ol><li>getenforce</li><li>/usr/sbin/sestatus -v
SELinux 有三种工作模式，分别是：  </li><li>enforcing：强制模式。违反 SELinux 规则的行为将被阻止并记录到日志中</li><li>permissive：宽容模式。违反 SELinux 规则的行为只会记录到日志中，一般为调试用</li><li>disabled：关闭 SELinux
SELinux 工作模式可以在 /etc/selinux/config 中设定, 如果想从 disabled 切换到 enforcing 或者 permissive 的话，需要重启系统，反过来也一样, enforcing 和 permissive 模式可以通过 setenforce 1|0 命令快速切换</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-修改主机名">Linux 修改主机名<a href="#linux-修改主机名" class="hash-link" aria-label="Linux 修改主机名的直接链接" title="Linux 修改主机名的直接链接">​</a></h3><ol><li>vim /etc/hostname（ubuntu） 或者 /etc/sysconfig/network（RHEL、CentOS 和 Fedora）, 添加：HOSTNAME=主机名, hostname 新主机名, 然后用 ssh 重新登录，就会显示新的主机名。</li><li>hostnamectl set-hostname 新主机名, 重启：reboot。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-字体颜色">Linux 字体颜色<a href="#linux-字体颜色" class="hash-link" aria-label="Linux 字体颜色的直接链接" title="Linux 字体颜色的直接链接">​</a></h3><ol><li>浅蓝色：表示链接文件</li><li>灰色：表示其他文件</li><li>绿色：表示可执行文件</li><li>红色：表示压缩文件</li><li>蓝色：表示目录</li><li>红色闪烁：表示链接的文件有问题了</li><li>黄色：表示设备文件，包括 block，char，fifo</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="清除缓存-buff-或者-cache">清除缓存 buff 或者 cache<a href="#清除缓存-buff-或者-cache" class="hash-link" aria-label="清除缓存 buff 或者 cache的直接链接" title="清除缓存 buff 或者 cache的直接链接">​</a></h3><p>通过 free -m 查看到 buff/cache 的值比较大，通过下面的命令，清除缓存。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /proc/sys/vm/drop_caches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /proc/sys/vm/drop_caches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 3 &gt; /proc/sys/vm/drop_caches</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="常见服务对应的端口">常见服务对应的端口<a href="#常见服务对应的端口" class="hash-link" aria-label="常见服务对应的端口的直接链接" title="常见服务对应的端口的直接链接">​</a></h3><p>查看远端的服务是否开通：tcp 8000 端口，比如查看 baidu.com 是否开通：telnet baidu.com 8000。</p><ol><li>21 FTP</li><li>22 SSH</li><li>25 SMTP</li><li>3306 MYSQL</li><li>873 rsync</li><li>161 snmp</li><li>111 rpc</li><li>3389 RPC</li><li>80 HTTP</li><li>443 HTTPS</li><li>110 POP3</li><li>53 DNS</li><li>514 syslog</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-开放端口">Linux 开放端口<a href="#linux-开放端口" class="hash-link" aria-label="Linux 开放端口的直接链接" title="Linux 开放端口的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ iptables -I INPUT -p tcp --dport 80 -j DROP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ iptables -I INPUT -p tcp -s 1.2.3.4 --dport 80 -j ACCEPT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里仅允许 1.2.3.4 访问本地主机的 80 端口。</p><p>对于类似 docker run -d -p 80:80 shaowenchen/demo-whoami 运行的服务，上面的方法无效，需要在 DOCKER-USER 链中添加规则。
Docker 会将 iptables 规则添加到 DOCKER 链中，如果需要在 Docker 之前添加规则需要添加到 DOCKER-USER 链中
<code>$ iptables -I DOCKER-USER -i ens192 ! -s 1.2.3.4 -p tcp --dport 80 -j DROP</code>
ens192 是本地的网卡，这里仅允许 1.2.3.4 访问本地主机的 80 端口。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ yum install -y iptables-services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ systemctl restart iptables.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果需要在主机重启之后 iptables 设置，依然有效，需要安装 iptables-services 并保存</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ yum install -y iptables-services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ service iptables save</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>查看 Linux 服务有哪些开放端口</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netstat -tuln</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ss -tuln</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lsof -i -P -n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -L -n -v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-centos-系统常用工具">安装 Centos 系统常用工具<a href="#安装-centos-系统常用工具" class="hash-link" aria-label="安装 Centos 系统常用工具的直接链接" title="安装 Centos 系统常用工具的直接链接">​</a></h3><p>yum install -y git
yum install -y jq
yum install -y sysstat
yum install -y telnet.*
yum install -y mysql
yum install -y python-pip
yum install -y epel-release
yum install -y lsof
yum install -y python3</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置-ssh-会话时长">设置 SSH 会话时长<a href="#设置-ssh-会话时长" class="hash-link" aria-label="设置 SSH 会话时长的直接链接" title="设置 SSH 会话时长的直接链接">​</a></h3><p>vim /etc/ssh/sshd_config</p><ul><li><p>设置 ClientAliveInterval 参数为一个较小的值，例如 300（表示 300 秒）。</p></li><li><p>设置 ClientAliveCountMax 参数为一个较大的值，例如 0（表示没有限制）。
保存并关闭配置文件。<br>
<!-- -->重新加载 SSH 服务器配置，以使更改生效，可以使用 service ssh reload 或 systemctl reload sshd 命令。</p></li><li><p>ClientAliveInterval：指定服务器向客户端发送保持活动消息的时间间隔。如果在指定的时间内没有活动，服务器将向客户端发送一个保持活动的消息。</p></li><li><p>ClientAliveCountMax：指定服务器在关闭连接之前允许客户端没有响应的次数。设置为 0 表示没有限制。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rsyncinotify-tools-实时同步数据">rsync+inotify-tools 实时同步数据<a href="#rsyncinotify-tools-实时同步数据" class="hash-link" aria-label="rsync+inotify-tools 实时同步数据的直接链接" title="rsync+inotify-tools 实时同步数据的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">安装 raync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install rsync -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">同步整个目录A到目录B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rsync -avz  本地目录A   本地目录B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">只同步目录A下的数据到目录B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rsync -avz  本地目录A/  本地目录B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">安装 gcc 依赖</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install gcc* -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">下载 inotify-tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://sourceforge.net/projects/inotify-tools/files/inotify-tools/3.13/inotify-tools-3.13.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">解压 inotify-tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -zxvf inotify-tools-3.13.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--prefix 指定安装目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd inotify-tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./configure --prefix=/usr/local/inotify &amp;&amp; make &amp;&amp; make install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">设置软连接</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ln -s /usr/local/inotify/bin/inotifywait /usr/sbin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ln -s /usr/local/inotify/bin/inotifywatch /usr/sbin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">编写同步脚本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt;&gt; rsync.sh &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inotifywait -rq -e  modify,create,delete /root/tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rsync -avz --delete /root/tmp/ /root/tmp2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">执行脚本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod u+x rsync.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sh rsync.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 tmp 新增文件/文件夹，进入 tmp2 目录查看是否增加文件，如增加则验证成功</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="trickle-带宽控制供给">Trickle 带宽控制供给<a href="#trickle-带宽控制供给" class="hash-link" aria-label="Trickle 带宽控制供给的直接链接" title="Trickle 带宽控制供给的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum install trickle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trickle -V</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trickle -d &lt;download-rate&gt; -u &lt;upload-rate&gt; &lt;command&gt;  // 1000 KB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trickle -d 1000 wget http://10.0.1.25/iso/centos/CentOS-7.7-x86_64-Minimal-1908.iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trickled 配置：cat /etc/trickled.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="speedtest-测速工具">speedtest 测速工具<a href="#speedtest-测速工具" class="hash-link" aria-label="speedtest 测速工具的直接链接" title="speedtest 测速工具的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">安装</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install speedtest-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">测速</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">speedtest-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">有教程用这个命令，经测试无效</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">speedtest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/assets/images/speedtest-e9acc2bb22d3180953d46ee669de477a.png" width="1236" height="270" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wondershaper-网卡限速工具">WonderShaper 网卡限速工具<a href="#wondershaper-网卡限速工具" class="hash-link" aria-label="WonderShaper 网卡限速工具的直接链接" title="WonderShaper 网卡限速工具的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">安装 注：未安装成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install -y wondersharper epel-release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查看 eth0 当前的状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wondershaper -s -a eth0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sshx">sshx<a href="#sshx" class="hash-link" aria-label="sshx的直接链接" title="sshx的直接链接">​</a></h3><p><a href="https://sshx.io/" target="_blank" rel="noopener noreferrer">sshx 分享终端</a></p><p>安装 sshx: curl -sSf <a href="https://sshx.io/get" target="_blank" rel="noopener noreferrer">https://sshx.io/get</a> | sh，执行 sshx 生成分享链接，点击链接可看见终端并一起协作。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看-linux-开放公网的端口">查看 Linux 开放公网的端口<a href="#查看-linux-开放公网的端口" class="hash-link" aria-label="查看 Linux 开放公网的端口的直接链接" title="查看 Linux 开放公网的端口的直接链接">​</a></h3><ul><li>netstat -tuln</li><li>ss -tuln</li><li>sudo lsof -i -P -n | grep LISTEN</li><li>sudo nmap -sT -O localhost</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-性能基准测试工具及测试方法">Linux 性能基准测试工具及测试方法<a href="#linux-性能基准测试工具及测试方法" class="hash-link" aria-label="Linux 性能基准测试工具及测试方法的直接链接" title="Linux 性能基准测试工具及测试方法的直接链接">​</a></h3><p><strong>参考资料</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/clay-wangzhi/bench.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bash bench.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a target="_blank" href="/assets/files/bench-61b9d7152776d920d7663724c655954c.sh"></a></p><ul><li>CPU
Super_Pi 是一种用于计算圆周率π的程序，通常用于测试计算机性能和稳定性。它的主要用途是测量系统的单线程性能，因为它是一个单线程应用程序。</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum -y install bc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time echo &quot;scale=5000; 4*a(1)&quot; | bc -l -q &amp;&gt;1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">结果分析，看 real 即可，时间越短，性能越好</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>sysbench 素数计算</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum -y install sysbench</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">测试方法: 启动4个线程计算10000事件所花的时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysbench cpu --threads=4 --events=10000 --time=0  run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">结果分析，看 total time 即可，时间越短，性能越好</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>内存
内存带宽(stream) Stream测试是内存测试中业界公认的内存带宽性能测试基准工具</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">编译安装 STREAM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum -y install gcc gcc-gfortran</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/jeffhammond/STREAM.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd STREAM/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">指定线程数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export OMP_NUM_THREADS=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./stream_c.exe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">结果分析，看 Copy、Scale、Add、Triad，数值越大，性能越好</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>磁盘 IO
磁盘读、写iops，iops：磁盘的每秒读写次数，这个是随机读写考察的重点</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 安装</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum -y install fio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 测试随机读 IOPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fio --ioengine=libaio --bs=4k --direct=1 --thread --time_based --rw=randread --filename=/home/randread.txt --runtime=60 --numjobs=1 --iodepth=1 --group_reporting --name=randread-dep1 --size=1g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 测试随机写 IOPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fio --ioengine=libaio --bs=4k --direct=1 --thread --time_based --rw=randwrite --filename=/home/randwrite.txt --runtime=60 --numjobs=1 --iodepth=1 --group_reporting --name=randread-dep1 --size=1g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 结果分析，看 IOPS 即可，值越大，性能越好</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-远程服务器报错">ssh 远程服务器报错<a href="#ssh-远程服务器报错" class="hash-link" aria-label="ssh 远程服务器报错的直接链接" title="ssh 远程服务器报错的直接链接">​</a></h3><p>报错：kex_exchange_identification: read: Connection reset by peer Connection reset by 114.67.240.27 port 22</p><p>解决：<br>
<!-- -->方式一：ssh-keygen -R 114.67.240.27
方式二：
vim /etc/hosts.allow
sshd:ALL
systemctl restart sshd</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="umask">umask<a href="#umask" class="hash-link" aria-label="umask的直接链接" title="umask的直接链接">​</a></h3><p>umask 用于设置默认的文件权限掩码。文件权限掩码决定了在创建新文件或目录时，所设置的默认权限模式。umask 命令的作用是从当前文件权限掩码中减去给定的权限位，以设置新文件或目录的默认权限。它可以用来限制新文件的默认权限，以确保安全性和隐私。</p><p>查看当前的文件权限掩码值：umask<br>
<!-- -->将文件权限掩码设置为 027。新创建的文件将具有权限模式 640，新创建的目录将具有权限模式 750：umask 027<br>
<!-- -->永久更改文件权限掩码值： 在用户的配置文件（如 ~/.bashrc、~/.bash_profile）中添加以下行：umask 027<br>
<!-- -->文件权限掩码的值是一个八进制数，用于指定要从默认权限模式中屏蔽的权限位。常见的权限位包括：</p><ul><li>0：没有权限被屏蔽。</li><li>2：屏蔽写权限。</li><li>7：屏蔽所有者权限、组权限和其他用户权限。</li></ul><p>示例<br>
<!-- -->文件umask 0022 是将文件权限掩码设置为 0022 的命令。<br>
<!-- -->文件权限掩码是一个八进制数，用于指定默认文件和目录权限中要屏蔽的权限位。在 0022 的情况下，权限掩码指定要屏蔽的权限位为 w（写入权限）。<br>
<!-- -->具体影响如下：  </p><ul><li>对于新创建的文件，默认权限模式为 666，然后从中减去权限掩码 0022，结果为 644。因此，新创建的文件将具有所有者可读写，其他用户只能读取的权限。</li><li>对于新创建的目录，默认权限模式为 777，然后从中减去权限掩码 0022，结果为 755。因此，新创建的目录将具有所有者可读写执行，其他用户只能读取和执行的权限。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linxu-发行版">Linxu 发行版<a href="#linxu-发行版" class="hash-link" aria-label="Linxu 发行版的直接链接" title="Linxu 发行版的直接链接">​</a></h3><p><a href="https://linux.cn/article-12609-1.html" target="_blank" rel="noopener noreferrer">Linux 黑话解释：什么是 Linux 发行版？为什么它被称为“发行版”？</a></p><p>Linux 发行版是一个由 Linux 内核、GNU 工具、附加软件和软件包管理器组成的操作系统，它也可能包括显示服务器和桌面环境，以用作常规的桌面操作系统。</p><p>这个术语之所以是 “Linux 发行版”，是因为像 Debian、Ubuntu 这样的机构“发行”了 Linux 内核以及所有必要的软件及实用程序（如网络管理器、软件包管理器、桌面环境等），使其可以作为一个操作系统使用。</p><p><a href="https://www.debian.org/releases/index.zh-cn.html" target="_blank" rel="noopener noreferrer">Debian 发行版本</a>，<a href="https://www.debian.org/doc/manuals/debian-faq/basic-defs.zh-cn.html" target="_blank" rel="noopener noreferrer">Debian 发行版常见问题</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="swp">swp<a href="#swp" class="hash-link" aria-label="swp的直接链接" title="swp的直接链接">​</a></h3><p>交换文件（.swp）的存在是为了在编辑器会话意外中断的情况下保护数据。再次打开相同的文件进行编辑时，编辑器会检测到交换文件的存在，并询问是否恢复之前的编辑会话。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="其它">其它<a href="#其它" class="hash-link" aria-label="其它的直接链接" title="其它的直接链接">​</a></h3><p>history 命令记录序号、日期时间、用户、登录IP及对应执行的命令
vim /etc/profile
export HISTTIMEFORMAT=&quot;%Y-%m-%d %H:%M:%S  <code>who am i | awk &#x27;{print $1,$5}&#x27;</code> &quot;
source /etc/profile</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ntrace">NTrace<a href="#ntrace" class="hash-link" aria-label="NTrace的直接链接" title="NTrace的直接链接">​</a></h3><p>NTrace 是一款Golang 实现的开源的、轻量级的可视化路由追踪CLI工具
<a href="https://github.com/nxtrace/NTrace-core" target="_blank" rel="noopener noreferrer">https://github.com/nxtrace/NTrace-core</a>
注：多试几次才安装成功
curl nxtrace.org/nt |bash
使用示例
nexttrace gitee.com</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ffmpeg">ffmpeg<a href="#ffmpeg" class="hash-link" aria-label="ffmpeg的直接链接" title="ffmpeg的直接链接">​</a></h3><p>$ apt-get install ffmpeg
$ yum install ffmpeg
$ brew install ffmpeg</p><p>mp4 转 avi:
$ ffmpeg -i input.mp4 output.avi</p><p>webm 转 mp4:
$ ffmpeg -i movie.webm movie.mp4</p><p>tzdata 是一个包含世界各地时区信息的数据库包。<br>
<!-- -->apt install -y tzdata</p><p>当前CPU是否支持SSE 4.2的命令<br>
<!-- -->$ grep -q sse4_2 /proc/cpuinfo &amp;&amp; echo &quot;SSE 4.2 supported&quot; || echo &quot;SSE 4.2 not supported&quot;</p><p>/etc/security/limits.d/default.conf 文件在 Linux 系统中用于配置用户和用户组的资源限制。它是 PAM（Pluggable Authentication Modules） 框架的一部分，具体作用如下：
主要作用：</p><ol><li>资源限制：</li></ol><ul><li>可用来限制用户的资源使用量，例如：</li><li>最大打开文件数（nofile）</li><li>最大进程数（nproc）</li><li>虚拟内存（as）</li><li>栈大小（stack）
这些限制可以帮助防止单个用户或进程耗尽系统资源。</li></ul><ol start="2"><li>用户和用户组配置：</li></ol><ul><li>文件可以针对特定用户或用户组设置限制。</li><li>可以使用 * 来表示所有用户，或指定特定的用户名或组名。</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; /etc/security/limits.d/default.conf &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* soft nofile 102400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* hard nofile 102400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* soft nproc 102400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* hard nproc 102400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="查询当前目录及子目录的所有文件总数">查询当前目录及子目录的所有文件总数<a href="#查询当前目录及子目录的所有文件总数" class="hash-link" aria-label="查询当前目录及子目录的所有文件总数的直接链接" title="查询当前目录及子目录的所有文件总数的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">. 表示当前目录。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-type f 选项用于仅查找文件。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wc -l 用于统计行数，即文件总数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -type f | wc -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-f 选项显示完整路径。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grep -v &#x27;/$&#x27; 过滤掉目录，只保留文件。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tree -f | grep -v &#x27;/$&#x27; | wc -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>获取 IP</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 通过 resolve 进行 IP 映射</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> --resolve </span><span class="token string" style="color:#e3116c">&#x27;example.com:443:127.0.0.1&#x27;</span><span class="token plain"> https://example.com/api/v5/information/ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">参数说明：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com: 要请求的主机名。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">443</span><span class="token plain">: HTTPS 的标准端口。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1: 将 example.com 映射到的 IP 地址，在这里它指向本地机器。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 正常情况下获取 IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> https://example.com/api/v5/information/ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 伪造 `X-Forwarded-For` 头部</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&#x27;X-Forwarded-For: 1.1.1.1&#x27;</span><span class="token plain"> https://example.com/api/v5/information/ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 伪造 `X-Real-IP` 头部</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&#x27;X-Real-IP: 1.1.1.1&#x27;</span><span class="token plain"> https://example.com/api/v5/information/ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 获取公网 IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> cip.cc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>作用是向 <a href="https://example.com/api/v5/information/ip" target="_blank" rel="noopener noreferrer">https://example.com/api/v5/information/ip</a> 发送请求，但在请求时，curl 会将 example.com 映射到本地 IP 地址 127.0.0.1。这通常用于：</p><ul><li>测试本地开发环境: 在开发过程中，可以将请求指向本地的服务器而不是实际的远程服务器。</li><li>调试: 确保请求被发送到特定的服务器，以便进行故障排除或验证。</li><li>绕过 DNS: 有时可以用于绕过 DNS 解析问题。</li></ul><p>X-Forwarded-For 是一个 HTTP 头部，用于标识通过代理服务器或负载均衡器转发的原始客户端 IP 地址。X-Forwarded-For 头部的格式通常是一个以逗号分隔的 IP 地址列表：</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">X-Forwarded-For: client-ip, proxy1-ip, proxy2-ip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>client-ip: 最初的客户端 IP 地址。</li><li>proxy1-ip: 第一个代理服务器的 IP 地址。</li><li>proxy2-ip: 第二个代理服务器的 IP 地址（如果存在）。</li></ul><p>工作原理</p><ol><li>客户端请求: 当客户端发送请求到代理服务器时，代理服务器会接收到客户端的 IP 地址。</li><li>添加头部: 代理服务器在转发请求时，会在请求头中添加 X-Forwarded-For 头部，其中包含客户端的 IP 地址。</li><li>多个代理: 如果请求经过多个代理，每个代理都会将其自身的 IP 地址添加到 X-Forwarded-For 头部，形成完整的 IP 地址链。</li></ol><p>X-Real-IP 是一个 HTTP 头部，用于传递客户端的真实 IP 地址，尤其是在通过代理服务器或负载均衡器转发请求时。与 X-Forwarded-For 类似，X-Real-IP 旨在帮助后端服务器识别原始客户端的 IP，但通常只包含一个 IP 地址，而不是一个以逗号分隔的列表。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Git/分布式版本控制系统"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">分布式版本控制系统</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Linux/LinuxCommand"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">LinuxCommand</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#环境变量" class="table-of-contents__link toc-highlight">环境变量</a></li><li><a href="#linux-下获取当前的目录" class="table-of-contents__link toc-highlight">Linux 下获取当前的目录</a></li><li><a href="#linux-设置开机自启" class="table-of-contents__link toc-highlight">Linux 设置开机自启</a></li><li><a href="#linux-查看防火墙状态" class="table-of-contents__link toc-highlight">Linux 查看防火墙状态</a></li><li><a href="#linux-修改主机名" class="table-of-contents__link toc-highlight">Linux 修改主机名</a></li><li><a href="#linux-字体颜色" class="table-of-contents__link toc-highlight">Linux 字体颜色</a></li><li><a href="#清除缓存-buff-或者-cache" class="table-of-contents__link toc-highlight">清除缓存 buff 或者 cache</a></li><li><a href="#常见服务对应的端口" class="table-of-contents__link toc-highlight">常见服务对应的端口</a></li><li><a href="#linux-开放端口" class="table-of-contents__link toc-highlight">Linux 开放端口</a></li><li><a href="#安装-centos-系统常用工具" class="table-of-contents__link toc-highlight">安装 Centos 系统常用工具</a></li><li><a href="#设置-ssh-会话时长" class="table-of-contents__link toc-highlight">设置 SSH 会话时长</a></li><li><a href="#rsyncinotify-tools-实时同步数据" class="table-of-contents__link toc-highlight">rsync+inotify-tools 实时同步数据</a></li><li><a href="#trickle-带宽控制供给" class="table-of-contents__link toc-highlight">Trickle 带宽控制供给</a></li><li><a href="#speedtest-测速工具" class="table-of-contents__link toc-highlight">speedtest 测速工具</a></li><li><a href="#wondershaper-网卡限速工具" class="table-of-contents__link toc-highlight">WonderShaper 网卡限速工具</a></li><li><a href="#sshx" class="table-of-contents__link toc-highlight">sshx</a></li><li><a href="#查看-linux-开放公网的端口" class="table-of-contents__link toc-highlight">查看 Linux 开放公网的端口</a></li><li><a href="#linux-性能基准测试工具及测试方法" class="table-of-contents__link toc-highlight">Linux 性能基准测试工具及测试方法</a></li><li><a href="#ssh-远程服务器报错" class="table-of-contents__link toc-highlight">ssh 远程服务器报错</a></li><li><a href="#umask" class="table-of-contents__link toc-highlight">umask</a></li><li><a href="#linxu-发行版" class="table-of-contents__link toc-highlight">Linxu 发行版</a></li><li><a href="#swp" class="table-of-contents__link toc-highlight">swp</a></li><li><a href="#其它" class="table-of-contents__link toc-highlight">其它</a></li><li><a href="#ntrace" class="table-of-contents__link toc-highlight">NTrace</a></li><li><a href="#ffmpeg" class="table-of-contents__link toc-highlight">ffmpeg</a></li><li><a href="#查询当前目录及子目录的所有文件总数" class="table-of-contents__link toc-highlight">查询当前目录及子目录的所有文件总数</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.cbea1bda.js"></script>
<script src="/assets/js/main.904b21c1.js"></script>
</body>
</html>