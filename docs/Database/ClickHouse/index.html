<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Database/ClickHouse/ClickHouse">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">ClickHouse | 知行合一</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://iewiewiew.github.io/img/me.jpeg"><meta data-rh="true" name="twitter:image" content="https://iewiewiew.github.io/img/me.jpeg"><meta data-rh="true" property="og:url" content="https://iewiewiew.github.io/docs/Database/ClickHouse/"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ClickHouse | 知行合一"><meta data-rh="true" name="description" content="[TOC]"><meta data-rh="true" property="og:description" content="[TOC]"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://iewiewiew.github.io/docs/Database/ClickHouse/"><link data-rh="true" rel="alternate" href="https://iewiewiew.github.io/docs/Database/ClickHouse/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://iewiewiew.github.io/docs/Database/ClickHouse/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.183e182e.css">
<link rel="preload" href="/assets/js/runtime~main.5e310ca4.js" as="script">
<link rel="preload" href="/assets/js/main.cb284e89.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/me.jpeg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/me.jpeg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">wei</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">目录</a><a href="https://www.processon.com/mindmap/6138112f1e085306ef9fe608" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">技能图谱<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/iewiewiew" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">README</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/AI/">AI</a><button aria-label="打开/收起侧边栏菜单「AI」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Ansible/">Ansible</a><button aria-label="打开/收起侧边栏菜单「Ansible」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/CSBasic/Network">CSBasic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Chaos/ChaosBlade">Chaos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Database/ClickHouse/">Database</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Database/ClickHouse/">ClickHouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Database/Elasticsearch">Elasticsearch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Database/GraphQL/">GraphQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Database/InfluxDB/">InfluxDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Database/MySQL/">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Database/PostgreSQL/">PostgreSQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Database/Redis">Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Database/SQLite">SQLite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Database/向量数据库">向量数据库</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/DevOps/">DevOps</a><button aria-label="打开/收起侧边栏菜单「DevOps」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Docker/">Docker</a><button aria-label="打开/收起侧边栏菜单「Docker」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Git/">Git</a><button aria-label="打开/收起侧边栏菜单「Git」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/JMeter/">JMeter</a><button aria-label="打开/收起侧边栏菜单「JMeter」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Jenkins/">Jenkins</a><button aria-label="打开/收起侧边栏菜单「Jenkins」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Kubernetes/">Kubernetes</a><button aria-label="打开/收起侧边栏菜单「Kubernetes」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Linux/">Linux</a><button aria-label="打开/收起侧边栏菜单「Linux」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Middleware/Apollo/">Middleware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Mixinfo/BigData/大数据">Mixinfo</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/SoftwareTest/AppTest">SoftwareTest</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Database</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ClickHouse</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>ClickHouse</h1></header><p>[TOC]</p><h1 align="center">ClickHouse</h1><blockquote><p>By：weimenghua<br>
<!-- -->Date：2023.01.19<br>
<!-- -->Descrition：ClickHouse 列式数据库管理系统</p></blockquote><p><strong>参考资料</strong><br>
<a href="https://clickhouse.com/docs/zh/" target="_blank" rel="noopener noreferrer">ClickHouse 官方文档</a><br>
<a href="https://github.com/ClickHouse/ClickHouse" target="_blank" rel="noopener noreferrer">ClickHouse 源码</a><br>
<a href="https://packages.clickhouse.com/" target="_blank" rel="noopener noreferrer">ClickHouse 下载</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-clickhouse-简介">1. ClickHouse 简介<a href="#1-clickhouse-简介" class="hash-link" aria-label="1. ClickHouse 简介的直接链接" title="1. ClickHouse 简介的直接链接">​</a></h2><p>ClickHouse 是一个用于联机分析(OLAP)的列式数据库管理系统(DBMS)。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-clickhouse-安装">2. ClickHouse 安装<a href="#2-clickhouse-安装" class="hash-link" aria-label="2. ClickHouse 安装的直接链接" title="2. ClickHouse 安装的直接链接">​</a></h2><p><a href="https://clickhouse.com/docs/zh/getting-started/install" target="_blank" rel="noopener noreferrer">安装文档</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install -y apt-transport-https ca-certificates dirmngr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 8919F6BD2B48D754</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;deb https://packages.clickhouse.com/deb stable main&quot; | sudo tee \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /etc/apt/sources.list.d/clickhouse.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install -y clickhouse-server clickhouse-client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo service clickhouse-server start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client # or &quot;clickhouse-client --password&quot; if you&#x27;ve set up a password.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">密码设置 123456</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">服务器配置文件位于 /etc/clickhouse-server/。在继续之前，请注意 config.xml 中的 &lt;path&gt; 元素。它决定了数据存储的位置，因此它应该位于磁盘容量的卷上，默认值是 /var/lib/clickhouse/。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">用户配置文件：/etc/clickhouse-server/users.xml，/etc/clickhouse-server/users.d/default-password.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>检查服务</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">检查服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netstat -antpl | grep clickhouse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">客户端连接</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查看日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tail -500f /var/log/clickhouse-server/clickhouse-server.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-clickhouse-教程">3. Clickhouse 教程<a href="#3-clickhouse-教程" class="hash-link" aria-label="3. Clickhouse 教程的直接链接" title="3. Clickhouse 教程的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse-sql">ClickHouse SQL<a href="#clickhouse-sql" class="hash-link" aria-label="ClickHouse SQL的直接链接" title="ClickHouse SQL的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">查看数据库</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHOW DATABASES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">创建数据库</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE [IF NOT EXISTS] db_name [ON CLUSTER cluster] [ENGINE = engine(...)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE db_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">删除数据库</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drop database [数据库名称]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drop database db_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">创建数据表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE db_name.table_name (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    customer_id String, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_stamp Date, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    click_event_type String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    country_code FixedString(2),    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    source_id UInt64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENGINE = MergeTree()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ORDER BY (time_stamp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查看数据库中的表名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHOW TABLES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHOW TABLES IN [数据库名称]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHOW TABLES IN db_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查看表结构 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DESCRIBE [数据库.表名]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DESCRIBE db_name.table_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">插入数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO [数据库.表名] VALUES ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO db_name.table_name VALUES (&#x27;customer1&#x27;, &#x27;2023-01-08&#x27;, &#x27;add_to_cart&#x27;, &#x27;US&#x27;, 568239)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">指定列名插入 INSERT INTO [数据库.表名] (列名，列名，列名，，) VALUES (, , ,)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO db_name.table_name (customer_id, time_stamp, click_event_type)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VALUES (&#x27;customer2&#x27;, &#x27;2023-01-08&#x27;, &#x27;remove_from_cart&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查看表中存储的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM [数据库.表名]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM [数据库.表名] WHERE [列名]= </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM [数据库.表名] WHERE [列名]&gt;=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT [列名] FROM [数据库.表名] WHERE [列名]&gt;=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM db_name.table_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC 默认引擎</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql 引擎,可以将 mysql 中的数据表直接复制过来。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE [IF NOT EXISTS] db_name [ON CLUSTER cluster]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENGINE = MySQL(&#x27;host:port&#x27;, [&#x27;database&#x27; | database], &#x27;user&#x27;, &#x27;password&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse-基础">Clickhouse 基础<a href="#clickhouse-基础" class="hash-link" aria-label="Clickhouse 基础的直接链接" title="Clickhouse 基础的直接链接">​</a></h3><p><a href="https://clickhouse.com/docs/zh/getting-started/tutorial" target="_blank" rel="noopener noreferrer">Clickhouse 教程</a>  </p><p>进入客户端方式一：
clickhouse-client --password 123456
clickhouse-client --host=... --port=... --user=... --password=...</p><p>进入客户端方式二：
clickhouse-client，输入密码，进入客户端后查看数据库：show databases，注意命令后无分号，输入之后按 Enter</p><p>下载并提取表数据
curl <a href="https://datasets.clickhouse.com/hits/tsv/hits_v1.tsv.xz" target="_blank" rel="noopener noreferrer">https://datasets.clickhouse.com/hits/tsv/hits_v1.tsv.xz</a> | unxz --threads=<code>nproc</code> &gt; hits_v1.tsv
curl <a href="https://datasets.clickhouse.com/visits/tsv/visits_v1.tsv.xz" target="_blank" rel="noopener noreferrer">https://datasets.clickhouse.com/visits/tsv/visits_v1.tsv.xz</a> | unxz --threads=<code>nproc</code> &gt; visits_v1.tsv</p><p>创建数据库</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;CREATE DATABASE IF NOT EXISTS tutorial&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>创建数据表
进入客户端后 clickhouse-client --password 123456 执行创建数据表命令
<a target="_blank" href="/assets/files/ClickHouse-8d9c8fcc752f7860487f49c32d15f240.sql">ClickHouse.sql</a></p><p>导入数据</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;INSERT INTO tutorial.hits_v1 FORMAT TSV&quot; --max_insert_block_size=100000 &lt; hits_v1.tsv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;INSERT INTO tutorial.visits_v1 FORMAT TSV&quot; --max_insert_block_size=100000 &lt; visits_v1.tsv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>查询数据表</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT COUNT(*) FROM tutorial.hits_v1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT COUNT(*) FROM tutorial.visits_v1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT * FROM tutorial.hits_v1 limit 10&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>从另一个表查询数据仔插入数据表</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO tutorial.hits_all SELECT * FROM tutorial.hits_v1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>查询系统设置</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT name, value, changed, description FROM system.settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT name, value, changed, description FROM system.settings WHERE name LIKE &#x27;%max_insert_b%&#x27; FORMAT TSV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changed,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM system.settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE name LIKE &#x27;%max_insert_b%&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>默认情况下，clickhouse-server 会在 8123 端口上监控 HTTP 请求（这可以在配置中修改）。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl &#x27;http://localhost:8123/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl &#x27;http://localhost:8123/ping&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl &#x27;http://localhost:8123/replicas_status&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">创建数据库（无密码）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;CREATE TABLE t (a UInt8) ENGINE = Memory&#x27; | curl &#x27;http://localhost:8123/&#x27; --data-binary @-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">创建数据库（有密码）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;CREATE TABLE t (a UInt8) ENGINE = Memory&#x27; | curl -u default:123456 &#x27;http://localhost:8123/&#x27; --data-binary @-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">创建表（无密码）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;INSERT INTO t VALUES (1),(2),(3)&#x27; | curl &#x27;http://localhost:8123/&#x27; --data-binary @-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">创建表（有密码）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;INSERT INTO t VALUES (1),(2),(3)&#x27; | curl -u default:123456 &#x27;http://localhost:8123/&#x27; --data-binary @-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查询表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT * FROM default.t&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>clickhouse 本地表和分布式表的区别</p><p>分布式表：数据会根据预定义的分布策略在多个物理节点上进行分片和复制，每个节点存储部分数据。这种方式可以在集群中实现数据的分布和冗余，提高数据处理和查询的并行性和可扩展性。
本地表：数据存储在单个节点上，不进行分片和复制。本地表适用于小规模数据集和单节点环境，仅使用单个服务器进行数据存储和查询。</p><p>1个或多个副本（Replica）、1个或多个分片（Shard）</p><table><thead><tr><th><strong>类型</strong></th><th><strong>说明</strong></th><th><strong>区别</strong></th></tr></thead><tbody><tr><td>本地表（Local Table）</td><td>数据只会存储在当前写入的节点上，不会被分散到多台服务器上。</td><td>本地表的写入和查询，受限于单台服务器的存储、计算资源，不具备横向拓展能力。分布式表的写入和查询，可以利用多台服务器的存储、计算资源，具有较好的横向拓展能力。</td></tr><tr><td>分布式表（Distributed Table）</td><td>本地表的集合，它将多个本地表抽象为一张统一的表，对外提供写入、查询功能。当写入分布式表时，数据会被自动分发到集合中的各个本地表中；当查询分布式表时，集合中的各个本地表都会被分别查询，并且把最终结果汇总后返回。</td><td></td></tr></tbody></table><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 创建分布式表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE example_table ON CLUSTER your_cluster_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id UInt32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) ENGINE = MergeTree()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ORDER BY id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 创建本地表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE example_table_local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id UInt32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) ENGINE = MergeTree()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ORDER BY id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 插入数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO example_table VALUES (1, &#x27;Alice&#x27;), (2, &#x27;Bob&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://clickhouse.com/docs/zh/engines/table-engines" target="_blank" rel="noopener noreferrer">表引擎</a></p><p>-- 查看数据库引擎
clickhouse-client --password=&quot;123456&quot; --query &quot;SELECT name, engine FROM system.tables WHERE database = &#x27;tutorial&#x27;;&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse--监控">Clickhouse  监控<a href="#clickhouse--监控" class="hash-link" aria-label="Clickhouse  监控的直接链接" title="Clickhouse  监控的直接链接">​</a></h3><p><a href="https://clickhouse.ac.cn/docs/en/operations/monitoring" target="_blank" rel="noopener noreferrer">内置高级可观测性仪表板</a>  </p><p>监控信息：<a href="http://114.67.240.27:8123/dashboard" target="_blank" rel="noopener noreferrer">http://114.67.240.27:8123/dashboard</a>  默认 default/123456 (初始化设置的密码)</p><p>修改内置监控仪表盘时区</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">查看数据库时区</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT timezone();&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /etc/clickhouse-server/config.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">修改 &lt;timezone&gt;UTC&lt;/timezone&gt; 为 &lt;timezone&gt;Asia/Shanghai&lt;/timezone&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">重启服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service clickhouse-server restart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service clickhouse-server status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="/docs/SoftwareTest/监控体系/Prometheus+Grafana">Grafana+Prometheus 监控</a></p><p>curl http://localhost:9363/metrics|less</p><p><a href="https://clickhouse.com/docs/zh/operations/server-configuration-parameters/settings#server_configuration_parameters-prometheus" target="_blank" rel="noopener noreferrer">https://clickhouse.com/docs/zh/operations/server-configuration-parameters/settings#server_configuration_parameters-prometheus</a></p><p>模板ID：14192（推荐）</p><p>搜索 Clickhouse 模板
<a href="https://grafana.com/grafana/dashboards/?search=clickhouse" target="_blank" rel="noopener noreferrer">https://grafana.com/grafana/dashboards/?search=clickhouse</a></p><p>在 Grafana 导入 Clickhouse 模板</p><p>踩坑：Grafana 面板无法展示 Clickhouse 数据
原因：数据源是写的固定的，如果当前要显示的监控数据的数据源名称跟这个不同，就会报错。
解决：将 json 文件中所有的 uid更换为当前监控数据的数据源名称，然后再将其导入，例如：prometheus</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse-和-mysql-映射"><a href="https://clickhouse.com/docs/zh/engines/database-engines/mysql" target="_blank" rel="noopener noreferrer">ClickHouse 和 MySQL 映射</a><a href="#clickhouse-和-mysql-映射" class="hash-link" aria-label="clickhouse-和-mysql-映射的直接链接" title="clickhouse-和-mysql-映射的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">在 MySQL 创建数据库 existing_database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE existing_database;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 MySQL 数据库 existing_database 创建数据表 mysql_table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE existing_database.`mysql_table` (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`int_id` INT NOT NULL AUTO_INCREMENT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`float` FLOAT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PRIMARY KEY (`int_id`));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 MySQL 数据库 existing_database 数据表 mysql_table 插入数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">insert into existing_database.mysql_table (`int_id`, `float`) VALUES (1,2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClickHouse 和 MySQL 映射</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE [IF NOT EXISTS] db_name [ON CLUSTER cluster] ENGINE = MySQL(&#x27;host:port&#x27;, [&#x27;database&#x27; | database], &#x27;user&#x27;, &#x27;password&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE IF NOT EXISTS db_name ENGINE = MySQL(&#x27;114.67.240.27:3306&#x27;, &#x27;existing_database&#x27;, &#x27;root&#x27;, &#x27;123456&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- host:port — MySQL服务地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- database — MySQL数据库名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- user — MySQL用户名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- password — MySQL用户密码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 ClickHouse 查询数据表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT * FROM db_name.mysql_table&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在 ClickHouse 插入数据表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;INSERT db_name.mysql_table (`int_id`, `float`) VALUES (3,4)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse-配置">Clickhouse 配置<a href="#clickhouse-配置" class="hash-link" aria-label="Clickhouse 配置的直接链接" title="Clickhouse 配置的直接链接">​</a></h3><p><a href="https://clickhouse.com/docs/zh/engines/table-engines/special/distributed" target="_blank" rel="noopener noreferrer">分布式引擎</a></p><p>在 /etc/clickhouse-server/config.xml 设置分区 replica</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;macros&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;shard&gt;01&lt;/shard&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;replica&gt;02&lt;/replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/macros&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- &lt;shard&gt;： 表示当前分片的标识符。分片是 ClickHouse 中的一个基本单元，分片将数据分布到不同的服务器以实现负载均衡和高可用性。例如，&lt;shard&gt;01&lt;/shard&gt; 代表这是第一个（或编号为 01 的）分片。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- &lt;replica&gt;： 表示当前副本的标识符。副本是分片的一个拷贝，确保了数据的冗余和高可用性。例如，&lt;replica&gt;02&lt;/replica&gt; 代表这是第二个（或编号为 02 的）副本。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;shard&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 可选的。写数据时分片权重。 默认: 1. --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;weight&gt;1&lt;/weight&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 可选的。是否只将数据写入其中一个副本。默认值:false(将数据写入所有副本)。 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;internal_replication&gt;false&lt;/internal_replication&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- 可选的。负载均衡副本的优先级，请参见（load_balancing 设置)。默认值:1(值越小优先级越高)。 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;priority&gt;1&lt;/priority&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;host&gt;example01-01-1&lt;/host&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;port&gt;9000&lt;/port&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;host&gt;example01-01-2&lt;/host&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;port&gt;9000&lt;/port&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/shard&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;shard&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;weight&gt;2&lt;/weight&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;internal_replication&gt;false&lt;/internal_replication&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;host&gt;example01-02-1&lt;/host&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;port&gt;9000&lt;/port&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;host&gt;example01-02-2&lt;/host&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;secure&gt;1&lt;/secure&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;port&gt;9440&lt;/port&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/replica&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/shard&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&lt;interserver_http_host&gt; 参数用于配置集群中服务器之间的 HTTP 通信。</p><p>允许外网访问需修改如下配置：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vim /etc/clickhouse-server/config.xml 去掉下方配置的注释</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;listen_host&gt;0.0.0.0&lt;/listen_host&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">重启服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service clickhouse-server restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>vim /etc/clickhouse-server/config.xml, 将 prometheus 这一项原先的注释放开，使其生效。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;prometheus&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;endpoint&gt;/metrics&lt;/endpoint&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;port&gt;9363&lt;/port&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;metrics&gt;true&lt;/metrics&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;events&gt;true&lt;/events&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;asynchronous_metrics&gt;true&lt;/asynchronous_metrics&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/iprometheus&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-知识碎片">4. 知识碎片<a href="#4-知识碎片" class="hash-link" aria-label="4. 知识碎片的直接链接" title="4. 知识碎片的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 查询日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">select query_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProfileEvents[&#x27;QueryCacheHits&#x27;]   AS query_cache,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">query_duration_ms / 1000          AS query_duration,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">formatReadableSize(memory_usage)  AS memory_usage,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">formatReadableQuantity(read_rows) AS read_rows,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">formatReadableSize(read_bytes)    AS read_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from system.query_log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 查询时区</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT timezone();&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 此系统表包含可以即时计算或具有当前值的指标。例如，同时处理的查询数量或当前的复制延迟。这个表始终是最新的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT * FROM system.metrics;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 待定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT * from system.tables;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 查询副本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT * from system.replicas&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SELECT database, table, engine, zookeeper_path, replica_path from system.replicas&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;desc system.replicas&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 查询集群</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;select * from system.clusters;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shard_num,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replica_num,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    host_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    is_local,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    database_shard_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    database_replica_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM system.clusters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clickhouse-client --password 123456 --query &quot;SHOW CLUSTERS&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>clickhouse-client --password=&quot;123456&quot; --query &quot;SHOW databases&quot;</p><p>clickhouse-client --password 123456</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Chaos/混沌工程"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">混沌工程</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Database/Elasticsearch"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Elasticsearch</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-clickhouse-简介" class="table-of-contents__link toc-highlight">1. ClickHouse 简介</a></li><li><a href="#2-clickhouse-安装" class="table-of-contents__link toc-highlight">2. ClickHouse 安装</a></li><li><a href="#3-clickhouse-教程" class="table-of-contents__link toc-highlight">3. Clickhouse 教程</a><ul><li><a href="#clickhouse-sql" class="table-of-contents__link toc-highlight">ClickHouse SQL</a></li><li><a href="#clickhouse-基础" class="table-of-contents__link toc-highlight">Clickhouse 基础</a></li><li><a href="#clickhouse--监控" class="table-of-contents__link toc-highlight">Clickhouse  监控</a></li><li><a href="#clickhouse-和-mysql-映射" class="table-of-contents__link toc-highlight">ClickHouse 和 MySQL 映射</a></li><li><a href="#clickhouse-配置" class="table-of-contents__link toc-highlight">Clickhouse 配置</a></li></ul></li><li><a href="#4-知识碎片" class="table-of-contents__link toc-highlight">4. 知识碎片</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5e310ca4.js"></script>
<script src="/assets/js/main.cb284e89.js"></script>
</body>
</html>